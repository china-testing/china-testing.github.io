<!DOCTYPE html>
<html lang="cn">
<head>
        <meta charset="utf-8" />
        <title>自动化测试框架pytest教程1-快速入门</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">python自动化测试人工智能 </a></h1>
                <nav><ul>
                    <li><a href="/category/ce-shi.html">测试</a></li>
                    <li class="active"><a href="/category/ce-shi-kuang-jia.html">测试框架</a></li>
                    <li><a href="/category/common.html">common</a></li>
                    <li><a href="/category/feng-shui.html">风水</a></li>
                    <li><a href="/category/ji-qi-xue-xi.html">机器学习</a></li>
                    <li><a href="/category/linux.html">linux</a></li>
                    <li><a href="/category/python.html">python</a></li>
                    <li><a href="/category/shu-ji.html">书籍</a></li>
                    <li><a href="/category/shu-ju-fen-xi.html">数据分析</a></li>
                    <li><a href="/category/zhong-cao-yao.html">中草药</a></li>
                    <li><a href="/category/zhong-yi.html">中医</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/python_pytest_testing1.html" rel="bookmark"
           title="Permalink to 自动化测试框架pytest教程1-快速入门">自动化测试框架pytest教程1-快速入门</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-05-16T10:20:00+08:00">
                Published: 三 16 五月 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/andrew.html">andrew</a>
        </address>
<p>In <a href="/category/ce-shi-kuang-jia.html">测试框架</a>.</p>

</footer><!-- /.post-info -->      <p>第1章 快速入门</p>
<h3 id="pytest">什么是pytest？</h3>
<p>pytest是一个强大的Python测试工具，它可以用于所有类型和级别的软件测试。 Pytest可以被开发团队，QA团队，独立测试小组，实践TDD的个人和开放源代码项目。实际上，整个互联网上的项目都是从unittest或者nose转向pytest，包括Mozilla和Dropbox。为什么？因为pytest提供
强大的功能，如'断言'重写，第三方插件模型，强大但简单的fixture模型。</p>
<p>pytest是软件测试框架，这意味着pytest是命令行工具。它会自动找到你写的测试，运行测试并报告结果。可编写插件或安装第三方来扩展插件。它可以用来测试Python发行版。它很容易与其他工具对接，如持续集成和网页自动化。</p>
<p>Pytest脱颖而出的原因：</p>
<ul>
<li>简单</li>
<li>易读</li>
<li>用assert来测试失败，而不是self.assertEqual() 或者self.assertLessThan() </li>
<li>可运行unittest或nose测试。</li>
</ul>
<p>事实上很多自动化测试平台，底层就是用驱动的。它们用flask或django等提供友好的页面展示，但是核心层还是在pytest和一些测试库的开发。</p>
<p>本文基于　ubuntu 16，　python3书写，但是在其他平台通常也应该可以执行。</p>
<ul>
<li>技术支持(可以加钉钉pythontesting邀请加入) QQ群：　144081101 591302926 567351477</li>
</ul>
<p><a href="https://china-testing.github.io/testing_training.html">接口自动化性能测试数据分析人工智能从业专家一对一线上培训大纲</a></p>
<p><a href="https://china-testing.github.io/python_pytest_testing1.html">本文最新版本</a></p>
<ul>
<li><a href="https://github.com/china-testing/python-api-tesing/tree/master/python3_libraries/pytest_testing">代码地址</a></li>
</ul>
<p>安装</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># pip3 install pytest</span>
<span class="n">Collecting</span> <span class="n">pytest</span>
  <span class="n">Downloading</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">files</span><span class="o">.</span><span class="n">pythonhosted</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="mi">76</span><span class="o">/</span><span class="mi">52</span><span class="o">/</span><span class="n">fc48d02492d9e6070cb672d9133382e83084f567f88eff1c27bd2c6c27a8</span><span class="o">/</span><span class="n">pytest</span><span class="o">-</span><span class="mf">3.5</span><span class="o">.</span><span class="mi">1</span><span class="o">-</span><span class="n">py2</span><span class="o">.</span><span class="n">py3</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="nb">any</span><span class="o">.</span><span class="n">whl</span> <span class="p">(</span><span class="mi">192</span><span class="n">kB</span><span class="p">)</span>
    <span class="mi">100</span><span class="o">%</span> <span class="o">|</span><span class="err">████████████████████████████████</span><span class="o">|</span> <span class="mi">194</span><span class="n">kB</span> <span class="mi">992</span><span class="n">kB</span><span class="o">/</span><span class="n">s</span> 
<span class="n">Requirement</span> <span class="n">already</span> <span class="n">satisfied</span><span class="p">:</span> <span class="n">setuptools</span> <span class="ow">in</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">/</span><span class="n">dist</span><span class="o">-</span><span class="n">packages</span> <span class="p">(</span><span class="kn">from</span> <span class="nn">pytest</span><span class="p">)</span> <span class="p">(</span><span class="mf">20.7</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span>
<span class="n">Collecting</span> <span class="n">pluggy</span><span class="o">&lt;</span><span class="mf">0.7</span><span class="p">,</span><span class="o">&gt;=</span><span class="mf">0.5</span> <span class="p">(</span><span class="kn">from</span> <span class="nn">pytest</span><span class="p">)</span>
  <span class="n">Downloading</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">files</span><span class="o">.</span><span class="n">pythonhosted</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="n">ba</span><span class="o">/</span><span class="mi">65</span><span class="o">/</span><span class="n">ded3bc40bbf8d887f262f150fbe1ae6637765b5c9534bd55690ed2c0b0f7</span><span class="o">/</span><span class="n">pluggy</span><span class="o">-</span><span class="mf">0.6</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">py3</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="nb">any</span><span class="o">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">more</span><span class="o">-</span><span class="n">itertools</span><span class="o">&gt;=</span><span class="mf">4.0</span><span class="o">.</span><span class="mi">0</span> <span class="p">(</span><span class="kn">from</span> <span class="nn">pytest</span><span class="p">)</span>
  <span class="n">Downloading</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">files</span><span class="o">.</span><span class="n">pythonhosted</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="mi">7</span><span class="n">a</span><span class="o">/</span><span class="mi">46</span><span class="o">/</span><span class="mi">886917</span><span class="n">c6a4ce49dd3fff250c01c5abac5390d57992751384fe61befc4877</span><span class="o">/</span><span class="n">more_itertools</span><span class="o">-</span><span class="mf">4.1</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">py3</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="nb">any</span><span class="o">.</span><span class="n">whl</span> <span class="p">(</span><span class="mi">47</span><span class="n">kB</span><span class="p">)</span>
    <span class="mi">100</span><span class="o">%</span> <span class="o">|</span><span class="err">████████████████████████████████</span><span class="o">|</span> <span class="mi">51</span><span class="n">kB</span> <span class="mf">2.3</span><span class="n">MB</span><span class="o">/</span><span class="n">s</span> 
<span class="n">Collecting</span> <span class="n">attrs</span><span class="o">&gt;=</span><span class="mf">17.4</span><span class="o">.</span><span class="mi">0</span> <span class="p">(</span><span class="kn">from</span> <span class="nn">pytest</span><span class="p">)</span>
  <span class="n">Downloading</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">files</span><span class="o">.</span><span class="n">pythonhosted</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="mi">41</span><span class="o">/</span><span class="mi">59</span><span class="o">/</span><span class="n">cedf87e91ed541be7957c501a92102f9cc6363c623a7666d69d51c78ac5b</span><span class="o">/</span><span class="n">attrs</span><span class="o">-</span><span class="mf">18.1</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">py2</span><span class="o">.</span><span class="n">py3</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="nb">any</span><span class="o">.</span><span class="n">whl</span>
<span class="n">Requirement</span> <span class="n">already</span> <span class="n">satisfied</span><span class="p">:</span> <span class="n">six</span><span class="o">&gt;=</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span> <span class="ow">in</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">/</span><span class="n">dist</span><span class="o">-</span><span class="n">packages</span> <span class="p">(</span><span class="kn">from</span> <span class="nn">pytest</span><span class="p">)</span> <span class="p">(</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span>
<span class="n">Collecting</span> <span class="n">py</span><span class="o">&gt;=</span><span class="mf">1.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">(</span><span class="kn">from</span> <span class="nn">pytest</span><span class="p">)</span>
  <span class="n">Downloading</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">files</span><span class="o">.</span><span class="n">pythonhosted</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="mi">67</span><span class="o">/</span><span class="n">a5</span><span class="o">/</span><span class="n">f77982214dd4c8fd104b066f249adea2c49e25e8703d284382eb5e9ab35a</span><span class="o">/</span><span class="n">py</span><span class="o">-</span><span class="mf">1.5</span><span class="o">.</span><span class="mi">3</span><span class="o">-</span><span class="n">py2</span><span class="o">.</span><span class="n">py3</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="nb">any</span><span class="o">.</span><span class="n">whl</span> <span class="p">(</span><span class="mi">84</span><span class="n">kB</span><span class="p">)</span>
    <span class="mi">100</span><span class="o">%</span> <span class="o">|</span><span class="err">████████████████████████████████</span><span class="o">|</span> <span class="mi">92</span><span class="n">kB</span> <span class="mf">2.6</span><span class="n">MB</span><span class="o">/</span><span class="n">s</span> 
<span class="n">tensorflow</span><span class="o">-</span><span class="n">tensorboard</span> <span class="mf">1.5</span><span class="o">.</span><span class="mi">1</span> <span class="n">has</span> <span class="n">requirement</span> <span class="n">bleach</span><span class="o">==</span><span class="mf">1.5</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="n">but</span> <span class="n">you</span><span class="s1">&#39;ll have bleach 2.1.3 which is incompatible.</span>
<span class="n">tensorflow</span><span class="o">-</span><span class="n">tensorboard</span> <span class="mf">1.5</span><span class="o">.</span><span class="mi">1</span> <span class="n">has</span> <span class="n">requirement</span> <span class="n">html5lib</span><span class="o">==</span><span class="mf">0.9999999</span><span class="p">,</span> <span class="n">but</span> <span class="n">you</span><span class="s1">&#39;ll have html5lib 1.0.1 which is incompatible.</span>
<span class="n">Installing</span> <span class="n">collected</span> <span class="n">packages</span><span class="p">:</span> <span class="n">pluggy</span><span class="p">,</span> <span class="n">more</span><span class="o">-</span><span class="n">itertools</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">py</span><span class="p">,</span> <span class="n">pytest</span>
<span class="n">Successfully</span> <span class="n">installed</span> <span class="n">attrs</span><span class="o">-</span><span class="mf">18.1</span><span class="o">.</span><span class="mi">0</span> <span class="n">more</span><span class="o">-</span><span class="n">itertools</span><span class="o">-</span><span class="mf">4.1</span><span class="o">.</span><span class="mi">0</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">0.6</span><span class="o">.</span><span class="mi">0</span> <span class="n">py</span><span class="o">-</span><span class="mf">1.5</span><span class="o">.</span><span class="mi">3</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">3.5</span><span class="o">.</span><span class="mi">1</span>

<span class="err">$</span> <span class="n">pytest</span> <span class="o">-</span><span class="n">h</span> <span class="c1"># 查看帮助</span>
<span class="n">usage</span><span class="p">:</span> <span class="n">pytest</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="p">[</span><span class="n">file_or_dir</span><span class="p">]</span> <span class="p">[</span><span class="n">file_or_dir</span><span class="p">]</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>

<span class="n">positional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="n">file_or_dir</span>

<span class="n">general</span><span class="p">:</span>
  <span class="o">-</span><span class="n">k</span> <span class="n">EXPRESSION</span>         <span class="n">only</span> <span class="n">run</span> <span class="n">tests</span> <span class="n">which</span> <span class="n">match</span> <span class="n">the</span> <span class="n">given</span> <span class="n">substring</span>
                        <span class="n">expression</span><span class="o">.</span> <span class="n">An</span> <span class="n">expression</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">python</span> <span class="n">evaluatable</span>
                        <span class="n">expression</span> <span class="n">where</span> <span class="nb">all</span> <span class="n">names</span> <span class="n">are</span> <span class="n">substring</span><span class="o">-</span><span class="n">matched</span>
                        <span class="n">against</span> <span class="n">test</span> <span class="n">names</span> <span class="ow">and</span> <span class="n">their</span> <span class="n">parent</span> <span class="n">classes</span><span class="o">.</span> <span class="n">Example</span><span class="p">:</span>
                        <span class="o">-</span><span class="n">k</span> <span class="s1">&#39;test_method or test_other&#39;</span> <span class="n">matches</span> <span class="nb">all</span> <span class="n">test</span>
                        <span class="n">functions</span> <span class="ow">and</span> <span class="n">classes</span> <span class="n">whose</span> <span class="n">name</span> <span class="n">contains</span>
                        <span class="s1">&#39;test_method&#39;</span> <span class="ow">or</span> <span class="s1">&#39;test_other&#39;</span><span class="p">,</span> <span class="k">while</span> <span class="o">-</span><span class="n">k</span> <span class="s1">&#39;not</span>
                        <span class="n">test_method</span><span class="s1">&#39; matches those that don&#39;</span><span class="n">t</span> <span class="n">contain</span>
                        <span class="s1">&#39;test_method&#39;</span> <span class="ow">in</span> <span class="n">their</span> <span class="n">names</span><span class="o">.</span> <span class="n">Additionally</span> <span class="n">keywords</span>
                        <span class="n">are</span> <span class="n">matched</span> <span class="n">to</span> <span class="n">classes</span> <span class="ow">and</span> <span class="n">functions</span> <span class="n">containing</span> <span class="n">extra</span>
                        <span class="n">names</span> <span class="ow">in</span> <span class="n">their</span> <span class="s1">&#39;extra_keyword_matches&#39;</span> <span class="nb">set</span><span class="p">,</span> <span class="k">as</span> <span class="n">well</span> <span class="k">as</span>
                        <span class="n">functions</span> <span class="n">which</span> <span class="n">have</span> <span class="n">names</span> <span class="n">assigned</span> <span class="n">directly</span> <span class="n">to</span> <span class="n">them</span><span class="o">.</span>
  <span class="o">-</span><span class="n">m</span> <span class="n">MARKEXPR</span>           <span class="n">only</span> <span class="n">run</span> <span class="n">tests</span> <span class="n">matching</span> <span class="n">given</span> <span class="n">mark</span> <span class="n">expression</span><span class="o">.</span>
                        <span class="n">example</span><span class="p">:</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;mark1 and not mark2&#39;</span><span class="o">.</span>
  <span class="o">--</span><span class="n">markers</span>             <span class="n">show</span> <span class="n">markers</span> <span class="p">(</span><span class="n">builtin</span><span class="p">,</span> <span class="n">plugin</span> <span class="ow">and</span> <span class="n">per</span><span class="o">-</span><span class="n">project</span> <span class="n">ones</span><span class="p">)</span><span class="o">.</span>
  <span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">--</span><span class="n">exitfirst</span>       <span class="nb">exit</span> <span class="n">instantly</span> <span class="n">on</span> <span class="n">first</span> <span class="n">error</span> <span class="ow">or</span> <span class="n">failed</span> <span class="n">test</span><span class="o">.</span>
  <span class="o">--</span><span class="n">maxfail</span><span class="o">=</span><span class="n">num</span>         <span class="nb">exit</span> <span class="n">after</span> <span class="n">first</span> <span class="n">num</span> <span class="n">failures</span> <span class="ow">or</span> <span class="n">errors</span><span class="o">.</span>
  <span class="o">--</span><span class="n">strict</span>              <span class="n">marks</span> <span class="ow">not</span> <span class="n">registered</span> <span class="ow">in</span> <span class="n">configuration</span> <span class="nb">file</span> <span class="k">raise</span>
                        <span class="n">errors</span><span class="o">.</span>
  <span class="o">-</span><span class="n">c</span> <span class="nb">file</span>               <span class="n">load</span> <span class="n">configuration</span> <span class="kn">from</span> <span class="sb">`file`</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">trying</span> <span class="n">to</span>
                        <span class="n">locate</span> <span class="n">one</span> <span class="n">of</span> <span class="n">the</span> <span class="n">implicit</span> <span class="n">configuration</span> <span class="n">files</span><span class="o">.</span>
  <span class="o">--</span><span class="k">continue</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">collection</span><span class="o">-</span><span class="n">errors</span>
                        <span class="n">Force</span> <span class="n">test</span> <span class="n">execution</span> <span class="n">even</span> <span class="k">if</span> <span class="n">collection</span> <span class="n">errors</span> <span class="n">occur</span><span class="o">.</span>
  <span class="o">--</span><span class="n">rootdir</span><span class="o">=</span><span class="n">ROOTDIR</span>     <span class="n">Define</span> <span class="n">root</span> <span class="n">directory</span> <span class="k">for</span> <span class="n">tests</span><span class="o">.</span> <span class="n">Can</span> <span class="n">be</span> <span class="n">relative</span> <span class="n">path</span><span class="p">:</span>
                        <span class="s1">&#39;root_dir&#39;</span><span class="p">,</span> <span class="s1">&#39;./root_dir&#39;</span><span class="p">,</span> <span class="s1">&#39;root_dir/another_dir/&#39;</span><span class="p">;</span>
                        <span class="n">absolute</span> <span class="n">path</span><span class="p">:</span> <span class="s1">&#39;/home/user/root_dir&#39;</span><span class="p">;</span> <span class="n">path</span> <span class="k">with</span>
                        <span class="n">variables</span><span class="p">:</span> <span class="s1">&#39;$HOME/root_dir&#39;</span><span class="o">.</span>
  <span class="o">--</span><span class="n">fixtures</span><span class="p">,</span> <span class="o">--</span><span class="n">funcargs</span>
                        <span class="n">show</span> <span class="n">available</span> <span class="n">fixtures</span><span class="p">,</span> <span class="nb">sorted</span> <span class="n">by</span> <span class="n">plugin</span> <span class="n">appearance</span>
                        <span class="p">(</span><span class="n">fixtures</span> <span class="k">with</span> <span class="n">leading</span> <span class="s1">&#39;_&#39;</span> <span class="n">are</span> <span class="n">only</span> <span class="n">shown</span> <span class="k">with</span> <span class="s1">&#39;-v&#39;</span><span class="p">)</span>
  <span class="o">--</span><span class="n">fixtures</span><span class="o">-</span><span class="n">per</span><span class="o">-</span><span class="n">test</span>   <span class="n">show</span> <span class="n">fixtures</span> <span class="n">per</span> <span class="n">test</span>
  <span class="o">--</span><span class="n">import</span><span class="o">-</span><span class="n">mode</span><span class="o">=</span><span class="p">{</span><span class="n">prepend</span><span class="p">,</span><span class="n">append</span><span class="p">}</span>
                        <span class="n">prepend</span><span class="o">/</span><span class="n">append</span> <span class="n">to</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span> <span class="n">when</span> <span class="n">importing</span> <span class="n">test</span>
                        <span class="n">modules</span><span class="p">,</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">prepend</span><span class="o">.</span>
  <span class="o">--</span><span class="n">pdb</span>                 <span class="n">start</span> <span class="n">the</span> <span class="n">interactive</span> <span class="n">Python</span> <span class="n">debugger</span> <span class="n">on</span> <span class="n">errors</span><span class="o">.</span>
  <span class="o">--</span><span class="n">pdbcls</span><span class="o">=</span><span class="n">modulename</span><span class="p">:</span><span class="n">classname</span>
                        <span class="n">start</span> <span class="n">a</span> <span class="n">custom</span> <span class="n">interactive</span> <span class="n">Python</span> <span class="n">debugger</span> <span class="n">on</span> <span class="n">errors</span><span class="o">.</span>
                        <span class="n">For</span> <span class="n">example</span><span class="p">:</span>
                        <span class="o">--</span><span class="n">pdbcls</span><span class="o">=</span><span class="n">IPython</span><span class="o">.</span><span class="n">terminal</span><span class="o">.</span><span class="n">debugger</span><span class="p">:</span><span class="n">TerminalPdb</span>
  <span class="o">--</span><span class="n">capture</span><span class="o">=</span><span class="n">method</span>      <span class="n">per</span><span class="o">-</span><span class="n">test</span> <span class="n">capturing</span> <span class="n">method</span><span class="p">:</span> <span class="n">one</span> <span class="n">of</span> <span class="n">fd</span><span class="o">|</span><span class="n">sys</span><span class="o">|</span><span class="n">no</span><span class="o">.</span>
  <span class="o">-</span><span class="n">s</span>                    <span class="n">shortcut</span> <span class="k">for</span> <span class="o">--</span><span class="n">capture</span><span class="o">=</span><span class="n">no</span><span class="o">.</span>
  <span class="o">--</span><span class="n">runxfail</span>            <span class="n">run</span> <span class="n">tests</span> <span class="n">even</span> <span class="k">if</span> <span class="n">they</span> <span class="n">are</span> <span class="n">marked</span> <span class="n">xfail</span>
  <span class="o">--</span><span class="n">lf</span><span class="p">,</span> <span class="o">--</span><span class="n">last</span><span class="o">-</span><span class="n">failed</span>   <span class="n">rerun</span> <span class="n">only</span> <span class="n">the</span> <span class="n">tests</span> <span class="n">that</span> <span class="n">failed</span> <span class="n">at</span> <span class="n">the</span> <span class="n">last</span> <span class="n">run</span> <span class="p">(</span><span class="ow">or</span>
                        <span class="nb">all</span> <span class="k">if</span> <span class="n">none</span> <span class="n">failed</span><span class="p">)</span>
  <span class="o">--</span><span class="n">ff</span><span class="p">,</span> <span class="o">--</span><span class="n">failed</span><span class="o">-</span><span class="n">first</span>  <span class="n">run</span> <span class="nb">all</span> <span class="n">tests</span> <span class="n">but</span> <span class="n">run</span> <span class="n">the</span> <span class="n">last</span> <span class="n">failures</span> <span class="n">first</span><span class="o">.</span> <span class="n">This</span>
                        <span class="n">may</span> <span class="n">re</span><span class="o">-</span><span class="n">order</span> <span class="n">tests</span> <span class="ow">and</span> <span class="n">thus</span> <span class="n">lead</span> <span class="n">to</span> <span class="n">repeated</span> <span class="n">fixture</span>
                        <span class="n">setup</span><span class="o">/</span><span class="n">teardown</span>
  <span class="o">--</span><span class="n">nf</span><span class="p">,</span> <span class="o">--</span><span class="n">new</span><span class="o">-</span><span class="n">first</span>     <span class="n">run</span> <span class="n">tests</span> <span class="kn">from</span> <span class="nn">new</span> <span class="nn">files</span> <span class="nn">first</span><span class="p">,</span> <span class="n">then</span> <span class="n">the</span> <span class="n">rest</span> <span class="n">of</span> <span class="n">the</span>
                        <span class="n">tests</span> <span class="nb">sorted</span> <span class="n">by</span> <span class="nb">file</span> <span class="n">mtime</span>
  <span class="o">--</span><span class="n">cache</span><span class="o">-</span><span class="n">show</span>          <span class="n">show</span> <span class="n">cache</span> <span class="n">contents</span><span class="p">,</span> <span class="n">don</span><span class="s1">&#39;t perform collection or tests</span>
  <span class="o">--</span><span class="n">cache</span><span class="o">-</span><span class="n">clear</span>         <span class="n">remove</span> <span class="nb">all</span> <span class="n">cache</span> <span class="n">contents</span> <span class="n">at</span> <span class="n">start</span> <span class="n">of</span> <span class="n">test</span> <span class="n">run</span><span class="o">.</span>
  <span class="o">--</span><span class="n">lfnf</span><span class="o">=</span><span class="p">{</span><span class="nb">all</span><span class="p">,</span><span class="n">none</span><span class="p">},</span> <span class="o">--</span><span class="n">last</span><span class="o">-</span><span class="n">failed</span><span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">failures</span><span class="o">=</span><span class="p">{</span><span class="nb">all</span><span class="p">,</span><span class="n">none</span><span class="p">}</span>
                        <span class="n">change</span> <span class="n">the</span> <span class="n">behavior</span> <span class="n">when</span> <span class="n">no</span> <span class="n">test</span> <span class="n">failed</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">last</span>
                        <span class="n">run</span> <span class="ow">or</span> <span class="n">no</span> <span class="n">information</span> <span class="n">about</span> <span class="n">the</span> <span class="n">last</span> <span class="n">failures</span> <span class="n">was</span>
                        <span class="n">found</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">cache</span>

<span class="n">reporting</span><span class="p">:</span>
  <span class="o">-</span><span class="n">v</span><span class="p">,</span> <span class="o">--</span><span class="n">verbose</span>         <span class="n">increase</span> <span class="n">verbosity</span><span class="o">.</span>
  <span class="o">-</span><span class="n">q</span><span class="p">,</span> <span class="o">--</span><span class="n">quiet</span>           <span class="n">decrease</span> <span class="n">verbosity</span><span class="o">.</span>
  <span class="o">--</span><span class="n">verbosity</span><span class="o">=</span><span class="n">VERBOSE</span>   <span class="nb">set</span> <span class="n">verbosity</span>
  <span class="o">-</span><span class="n">r</span> <span class="n">chars</span>              <span class="n">show</span> <span class="n">extra</span> <span class="n">test</span> <span class="n">summary</span> <span class="n">info</span> <span class="k">as</span> <span class="n">specified</span> <span class="n">by</span> <span class="n">chars</span>
                        <span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="n">ailed</span><span class="p">,</span> <span class="p">(</span><span class="n">E</span><span class="p">)</span><span class="n">error</span><span class="p">,</span> <span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="n">skipped</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="n">failed</span><span class="p">,</span> <span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="n">passed</span><span class="p">,</span>
                        <span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="n">passed</span><span class="p">,</span> <span class="p">(</span><span class="n">P</span><span class="p">)</span><span class="n">passed</span> <span class="k">with</span> <span class="n">output</span><span class="p">,</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="nb">all</span> <span class="k">except</span> <span class="n">pP</span><span class="o">.</span>
                        <span class="n">Warnings</span> <span class="n">are</span> <span class="n">displayed</span> <span class="n">at</span> <span class="nb">all</span> <span class="n">times</span> <span class="k">except</span> <span class="n">when</span>
                        <span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">warnings</span> <span class="ow">is</span> <span class="nb">set</span>
  <span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">warnings</span><span class="p">,</span> <span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">pytest</span><span class="o">-</span><span class="n">warnings</span>
                        <span class="n">disable</span> <span class="n">warnings</span> <span class="n">summary</span>
  <span class="o">-</span><span class="n">l</span><span class="p">,</span> <span class="o">--</span><span class="n">showlocals</span>      <span class="n">show</span> <span class="nb">locals</span> <span class="ow">in</span> <span class="n">tracebacks</span> <span class="p">(</span><span class="n">disabled</span> <span class="n">by</span> <span class="n">default</span><span class="p">)</span><span class="o">.</span>
  <span class="o">--</span><span class="n">tb</span><span class="o">=</span><span class="n">style</span>            <span class="n">traceback</span> <span class="k">print</span> <span class="n">mode</span> <span class="p">(</span><span class="n">auto</span><span class="o">/</span><span class="nb">long</span><span class="o">/</span><span class="n">short</span><span class="o">/</span><span class="n">line</span><span class="o">/</span><span class="n">native</span><span class="o">/</span><span class="n">no</span><span class="p">)</span><span class="o">.</span>
  <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">capture</span><span class="o">=</span><span class="p">{</span><span class="n">no</span><span class="p">,</span><span class="n">stdout</span><span class="p">,</span><span class="n">stderr</span><span class="p">,</span><span class="n">log</span><span class="p">,</span><span class="nb">all</span><span class="p">}</span>
                        <span class="n">Controls</span> <span class="n">how</span> <span class="n">captured</span> <span class="n">stdout</span><span class="o">/</span><span class="n">stderr</span><span class="o">/</span><span class="n">log</span> <span class="ow">is</span> <span class="n">shown</span> <span class="n">on</span>
                        <span class="n">failed</span> <span class="n">tests</span><span class="o">.</span> <span class="n">Default</span> <span class="ow">is</span> <span class="s1">&#39;all&#39;</span><span class="o">.</span>
  <span class="o">--</span><span class="n">full</span><span class="o">-</span><span class="n">trace</span>          <span class="n">don</span><span class="s1">&#39;t cut any tracebacks (default is to cut).</span>
  <span class="o">--</span><span class="n">color</span><span class="o">=</span><span class="n">color</span>         <span class="n">color</span> <span class="n">terminal</span> <span class="n">output</span> <span class="p">(</span><span class="n">yes</span><span class="o">/</span><span class="n">no</span><span class="o">/</span><span class="n">auto</span><span class="p">)</span><span class="o">.</span>
  <span class="o">--</span><span class="n">durations</span><span class="o">=</span><span class="n">N</span>         <span class="n">show</span> <span class="n">N</span> <span class="n">slowest</span> <span class="n">setup</span><span class="o">/</span><span class="n">test</span> <span class="n">durations</span> <span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">0</span> <span class="k">for</span> <span class="nb">all</span><span class="p">)</span><span class="o">.</span>
  <span class="o">--</span><span class="n">pastebin</span><span class="o">=</span><span class="n">mode</span>       <span class="n">send</span> <span class="n">failed</span><span class="o">|</span><span class="nb">all</span> <span class="n">info</span> <span class="n">to</span> <span class="n">bpaste</span><span class="o">.</span><span class="n">net</span> <span class="n">pastebin</span> <span class="n">service</span><span class="o">.</span>
  <span class="o">--</span><span class="n">junit</span><span class="o">-</span><span class="n">xml</span><span class="o">=</span><span class="n">path</span>      <span class="n">create</span> <span class="n">junit</span><span class="o">-</span><span class="n">xml</span> <span class="n">style</span> <span class="n">report</span> <span class="nb">file</span> <span class="n">at</span> <span class="n">given</span> <span class="n">path</span><span class="o">.</span>
  <span class="o">--</span><span class="n">junit</span><span class="o">-</span><span class="n">prefix</span><span class="o">=</span><span class="nb">str</span>    <span class="n">prepend</span> <span class="n">prefix</span> <span class="n">to</span> <span class="n">classnames</span> <span class="ow">in</span> <span class="n">junit</span><span class="o">-</span><span class="n">xml</span> <span class="n">output</span>
  <span class="o">--</span><span class="n">result</span><span class="o">-</span><span class="n">log</span><span class="o">=</span><span class="n">path</span>     <span class="n">DEPRECATED</span> <span class="n">path</span> <span class="k">for</span> <span class="n">machine</span><span class="o">-</span><span class="n">readable</span> <span class="n">result</span> <span class="n">log</span><span class="o">.</span>

<span class="n">collection</span><span class="p">:</span>
  <span class="o">--</span><span class="n">collect</span><span class="o">-</span><span class="n">only</span>        <span class="n">only</span> <span class="n">collect</span> <span class="n">tests</span><span class="p">,</span> <span class="n">don</span><span class="s1">&#39;t execute them.</span>
  <span class="o">--</span><span class="n">pyargs</span>              <span class="k">try</span> <span class="n">to</span> <span class="n">interpret</span> <span class="nb">all</span> <span class="n">arguments</span> <span class="k">as</span> <span class="n">python</span> <span class="n">packages</span><span class="o">.</span>
  <span class="o">--</span><span class="n">ignore</span><span class="o">=</span><span class="n">path</span>         <span class="n">ignore</span> <span class="n">path</span> <span class="n">during</span> <span class="n">collection</span> <span class="p">(</span><span class="n">multi</span><span class="o">-</span><span class="n">allowed</span><span class="p">)</span><span class="o">.</span>
  <span class="o">--</span><span class="n">deselect</span><span class="o">=</span><span class="n">nodeid_prefix</span>
                        <span class="n">deselect</span> <span class="n">item</span> <span class="n">during</span> <span class="n">collection</span> <span class="p">(</span><span class="n">multi</span><span class="o">-</span><span class="n">allowed</span><span class="p">)</span><span class="o">.</span>
  <span class="o">--</span><span class="n">confcutdir</span><span class="o">=</span><span class="nb">dir</span>      <span class="n">only</span> <span class="n">load</span> <span class="n">conftest</span><span class="o">.</span><span class="n">py</span><span class="s1">&#39;s relative to specified dir.</span>
  <span class="o">--</span><span class="n">noconftest</span>          <span class="n">Don</span><span class="s1">&#39;t load any conftest.py files.</span>
  <span class="o">--</span><span class="n">keep</span><span class="o">-</span><span class="n">duplicates</span>     <span class="n">Keep</span> <span class="n">duplicate</span> <span class="n">tests</span><span class="o">.</span>
  <span class="o">--</span><span class="n">collect</span><span class="o">-</span><span class="ow">in</span><span class="o">-</span><span class="n">virtualenv</span>
                        <span class="n">Don</span><span class="s1">&#39;t ignore tests in a local virtualenv directory</span>
  <span class="o">--</span><span class="n">doctest</span><span class="o">-</span><span class="n">modules</span>     <span class="n">run</span> <span class="n">doctests</span> <span class="ow">in</span> <span class="nb">all</span> <span class="o">.</span><span class="n">py</span> <span class="n">modules</span>
  <span class="o">--</span><span class="n">doctest</span><span class="o">-</span><span class="n">report</span><span class="o">=</span><span class="p">{</span><span class="n">none</span><span class="p">,</span><span class="n">cdiff</span><span class="p">,</span><span class="n">ndiff</span><span class="p">,</span><span class="n">udiff</span><span class="p">,</span><span class="n">only_first_failure</span><span class="p">}</span>
                        <span class="n">choose</span> <span class="n">another</span> <span class="n">output</span> <span class="n">format</span> <span class="k">for</span> <span class="n">diffs</span> <span class="n">on</span> <span class="n">doctest</span>
                        <span class="n">failure</span>
  <span class="o">--</span><span class="n">doctest</span><span class="o">-</span><span class="n">glob</span><span class="o">=</span><span class="n">pat</span>    <span class="n">doctests</span> <span class="nb">file</span> <span class="n">matching</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">test</span><span class="o">*.</span><span class="n">txt</span>
  <span class="o">--</span><span class="n">doctest</span><span class="o">-</span><span class="n">ignore</span><span class="o">-</span><span class="n">import</span><span class="o">-</span><span class="n">errors</span>
                        <span class="n">ignore</span> <span class="n">doctest</span> <span class="n">ImportErrors</span>
  <span class="o">--</span><span class="n">doctest</span><span class="o">-</span><span class="k">continue</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">failure</span>
                        <span class="k">for</span> <span class="n">a</span> <span class="n">given</span> <span class="n">doctest</span><span class="p">,</span> <span class="k">continue</span> <span class="n">to</span> <span class="n">run</span> <span class="n">after</span> <span class="n">the</span> <span class="n">first</span>
                        <span class="n">failure</span>

<span class="n">test</span> <span class="n">session</span> <span class="n">debugging</span> <span class="ow">and</span> <span class="n">configuration</span><span class="p">:</span>
  <span class="o">--</span><span class="n">basetemp</span><span class="o">=</span><span class="nb">dir</span>        <span class="n">base</span> <span class="n">temporary</span> <span class="n">directory</span> <span class="k">for</span> <span class="n">this</span> <span class="n">test</span> <span class="n">run</span><span class="o">.</span>
  <span class="o">--</span><span class="n">version</span>             <span class="n">display</span> <span class="n">pytest</span> <span class="n">lib</span> <span class="n">version</span> <span class="ow">and</span> <span class="kn">import</span> <span class="nn">information.</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">show</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">configuration</span> <span class="n">info</span>
  <span class="o">-</span><span class="n">p</span> <span class="n">name</span>               <span class="n">early</span><span class="o">-</span><span class="n">load</span> <span class="n">given</span> <span class="n">plugin</span> <span class="p">(</span><span class="n">multi</span><span class="o">-</span><span class="n">allowed</span><span class="p">)</span><span class="o">.</span> <span class="n">To</span> <span class="n">avoid</span>
                        <span class="n">loading</span> <span class="n">of</span> <span class="n">plugins</span><span class="p">,</span> <span class="n">use</span> <span class="n">the</span> <span class="sb">`no:`</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span>
                        <span class="sb">`no:doctest`</span><span class="o">.</span>
  <span class="o">--</span><span class="n">trace</span><span class="o">-</span><span class="n">config</span>        <span class="n">trace</span> <span class="n">considerations</span> <span class="n">of</span> <span class="n">conftest</span><span class="o">.</span><span class="n">py</span> <span class="n">files</span><span class="o">.</span>
  <span class="o">--</span><span class="n">debug</span>               <span class="n">store</span> <span class="n">internal</span> <span class="n">tracing</span> <span class="n">debug</span> <span class="n">information</span> <span class="ow">in</span>
                        <span class="s1">&#39;pytestdebug.log&#39;</span><span class="o">.</span>
  <span class="o">-</span><span class="n">o</span> <span class="n">OVERRIDE_INI</span><span class="p">,</span> <span class="o">--</span><span class="n">override</span><span class="o">-</span><span class="n">ini</span><span class="o">=</span><span class="n">OVERRIDE_INI</span>
                        <span class="n">override</span> <span class="n">ini</span> <span class="n">option</span> <span class="k">with</span> <span class="s2">&quot;option=value&quot;</span> <span class="n">style</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span>
                        <span class="sb">`-o xfail_strict=True -o cache_dir=cache`</span><span class="o">.</span>
  <span class="o">--</span><span class="k">assert</span><span class="o">=</span><span class="n">MODE</span>         <span class="n">Control</span> <span class="n">assertion</span> <span class="n">debugging</span> <span class="n">tools</span><span class="o">.</span> <span class="s1">&#39;plain&#39;</span> <span class="n">performs</span> <span class="n">no</span>
                        <span class="n">assertion</span> <span class="n">debugging</span><span class="o">.</span> <span class="s1">&#39;rewrite&#39;</span> <span class="p">(</span><span class="n">the</span> <span class="n">default</span><span class="p">)</span> <span class="n">rewrites</span>
                        <span class="k">assert</span> <span class="n">statements</span> <span class="ow">in</span> <span class="n">test</span> <span class="n">modules</span> <span class="n">on</span> <span class="kn">import</span> <span class="nn">to</span> <span class="nn">provide</span>
                        <span class="k">assert</span> <span class="n">expression</span> <span class="n">information</span><span class="o">.</span>
  <span class="o">--</span><span class="n">setup</span><span class="o">-</span><span class="n">only</span>          <span class="n">only</span> <span class="n">setup</span> <span class="n">fixtures</span><span class="p">,</span> <span class="n">do</span> <span class="ow">not</span> <span class="n">execute</span> <span class="n">tests</span><span class="o">.</span>
  <span class="o">--</span><span class="n">setup</span><span class="o">-</span><span class="n">show</span>          <span class="n">show</span> <span class="n">setup</span> <span class="n">of</span> <span class="n">fixtures</span> <span class="k">while</span> <span class="n">executing</span> <span class="n">tests</span><span class="o">.</span>
  <span class="o">--</span><span class="n">setup</span><span class="o">-</span><span class="n">plan</span>          <span class="n">show</span> <span class="n">what</span> <span class="n">fixtures</span> <span class="ow">and</span> <span class="n">tests</span> <span class="n">would</span> <span class="n">be</span> <span class="n">executed</span> <span class="n">but</span>
                        <span class="n">don</span><span class="s1">&#39;t execute anything.</span>

<span class="n">pytest</span><span class="o">-</span><span class="n">warnings</span><span class="p">:</span>
  <span class="o">-</span><span class="n">W</span> <span class="n">PYTHONWARNINGS</span><span class="p">,</span> <span class="o">--</span><span class="n">pythonwarnings</span><span class="o">=</span><span class="n">PYTHONWARNINGS</span>
                        <span class="nb">set</span> <span class="n">which</span> <span class="n">warnings</span> <span class="n">to</span> <span class="n">report</span><span class="p">,</span> <span class="n">see</span> <span class="o">-</span><span class="n">W</span> <span class="n">option</span> <span class="n">of</span> <span class="n">python</span>
                        <span class="n">itself</span><span class="o">.</span>

<span class="n">logging</span><span class="p">:</span>
  <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="k">print</span><span class="o">-</span><span class="n">logs</span>       <span class="n">disable</span> <span class="n">printing</span> <span class="n">caught</span> <span class="n">logs</span> <span class="n">on</span> <span class="n">failed</span> <span class="n">tests</span><span class="o">.</span>
  <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">level</span><span class="o">=</span><span class="n">LOG_LEVEL</span>
                        <span class="n">logging</span> <span class="n">level</span> <span class="n">used</span> <span class="n">by</span> <span class="n">the</span> <span class="n">logging</span> <span class="n">module</span>
  <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">format</span><span class="o">=</span><span class="n">LOG_FORMAT</span>
                        <span class="n">log</span> <span class="n">format</span> <span class="k">as</span> <span class="n">used</span> <span class="n">by</span> <span class="n">the</span> <span class="n">logging</span> <span class="n">module</span><span class="o">.</span>
  <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">date</span><span class="o">-</span><span class="n">format</span><span class="o">=</span><span class="n">LOG_DATE_FORMAT</span>
                        <span class="n">log</span> <span class="n">date</span> <span class="n">format</span> <span class="k">as</span> <span class="n">used</span> <span class="n">by</span> <span class="n">the</span> <span class="n">logging</span> <span class="n">module</span><span class="o">.</span>
  <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">cli</span><span class="o">-</span><span class="n">level</span><span class="o">=</span><span class="n">LOG_CLI_LEVEL</span>
                        <span class="n">cli</span> <span class="n">logging</span> <span class="n">level</span><span class="o">.</span>
  <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">cli</span><span class="o">-</span><span class="n">format</span><span class="o">=</span><span class="n">LOG_CLI_FORMAT</span>
                        <span class="n">log</span> <span class="n">format</span> <span class="k">as</span> <span class="n">used</span> <span class="n">by</span> <span class="n">the</span> <span class="n">logging</span> <span class="n">module</span><span class="o">.</span>
  <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">cli</span><span class="o">-</span><span class="n">date</span><span class="o">-</span><span class="n">format</span><span class="o">=</span><span class="n">LOG_CLI_DATE_FORMAT</span>
                        <span class="n">log</span> <span class="n">date</span> <span class="n">format</span> <span class="k">as</span> <span class="n">used</span> <span class="n">by</span> <span class="n">the</span> <span class="n">logging</span> <span class="n">module</span><span class="o">.</span>
  <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="nb">file</span><span class="o">=</span><span class="n">LOG_FILE</span>   <span class="n">path</span> <span class="n">to</span> <span class="n">a</span> <span class="nb">file</span> <span class="n">when</span> <span class="n">logging</span> <span class="n">will</span> <span class="n">be</span> <span class="n">written</span> <span class="n">to</span><span class="o">.</span>
  <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="nb">file</span><span class="o">-</span><span class="n">level</span><span class="o">=</span><span class="n">LOG_FILE_LEVEL</span>
                        <span class="n">log</span> <span class="nb">file</span> <span class="n">logging</span> <span class="n">level</span><span class="o">.</span>
  <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="nb">file</span><span class="o">-</span><span class="n">format</span><span class="o">=</span><span class="n">LOG_FILE_FORMAT</span>
                        <span class="n">log</span> <span class="n">format</span> <span class="k">as</span> <span class="n">used</span> <span class="n">by</span> <span class="n">the</span> <span class="n">logging</span> <span class="n">module</span><span class="o">.</span>
  <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="nb">file</span><span class="o">-</span><span class="n">date</span><span class="o">-</span><span class="n">format</span><span class="o">=</span><span class="n">LOG_FILE_DATE_FORMAT</span>
                        <span class="n">log</span> <span class="n">date</span> <span class="n">format</span> <span class="k">as</span> <span class="n">used</span> <span class="n">by</span> <span class="n">the</span> <span class="n">logging</span> <span class="n">module</span><span class="o">.</span>


<span class="p">[</span><span class="n">pytest</span><span class="p">]</span> <span class="n">ini</span><span class="o">-</span><span class="n">options</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">first</span> <span class="n">pytest</span><span class="o">.</span><span class="n">ini</span><span class="o">|</span><span class="n">tox</span><span class="o">.</span><span class="n">ini</span><span class="o">|</span><span class="n">setup</span><span class="o">.</span><span class="n">cfg</span> <span class="nb">file</span> <span class="n">found</span><span class="p">:</span>

  <span class="n">markers</span> <span class="p">(</span><span class="n">linelist</span><span class="p">)</span>       <span class="n">markers</span> <span class="k">for</span> <span class="n">test</span> <span class="n">functions</span>
  <span class="n">empty_parameter_set_mark</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="n">default</span> <span class="n">marker</span> <span class="k">for</span> <span class="n">empty</span> <span class="n">parametersets</span>
  <span class="n">norecursedirs</span> <span class="p">(</span><span class="n">args</span><span class="p">)</span>     <span class="n">directory</span> <span class="n">patterns</span> <span class="n">to</span> <span class="n">avoid</span> <span class="k">for</span> <span class="n">recursion</span>
  <span class="n">testpaths</span> <span class="p">(</span><span class="n">args</span><span class="p">)</span>         <span class="n">directories</span> <span class="n">to</span> <span class="n">search</span> <span class="k">for</span> <span class="n">tests</span> <span class="n">when</span> <span class="n">no</span> <span class="n">files</span> <span class="ow">or</span> <span class="n">directories</span> <span class="n">are</span> <span class="n">given</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">command</span> <span class="n">line</span><span class="o">.</span>
  <span class="n">console_output_style</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="n">console</span> <span class="n">output</span><span class="p">:</span> <span class="n">classic</span> <span class="ow">or</span> <span class="k">with</span> <span class="n">additional</span> <span class="n">progress</span> <span class="n">information</span> <span class="p">(</span><span class="n">classic</span><span class="o">|</span><span class="n">progress</span><span class="p">)</span><span class="o">.</span>
  <span class="n">usefixtures</span> <span class="p">(</span><span class="n">args</span><span class="p">)</span>       <span class="nb">list</span> <span class="n">of</span> <span class="n">default</span> <span class="n">fixtures</span> <span class="n">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">with</span> <span class="n">this</span> <span class="n">project</span>
  <span class="n">python_files</span> <span class="p">(</span><span class="n">args</span><span class="p">)</span>      <span class="n">glob</span><span class="o">-</span><span class="n">style</span> <span class="nb">file</span> <span class="n">patterns</span> <span class="k">for</span> <span class="n">Python</span> <span class="n">test</span> <span class="n">module</span> <span class="n">discovery</span>
  <span class="n">python_classes</span> <span class="p">(</span><span class="n">args</span><span class="p">)</span>    <span class="n">prefixes</span> <span class="ow">or</span> <span class="n">glob</span> <span class="n">names</span> <span class="k">for</span> <span class="n">Python</span> <span class="n">test</span> <span class="k">class</span> <span class="nc">discovery</span>
  <span class="n">python_functions</span> <span class="p">(</span><span class="n">args</span><span class="p">)</span>  <span class="n">prefixes</span> <span class="ow">or</span> <span class="n">glob</span> <span class="n">names</span> <span class="k">for</span> <span class="n">Python</span> <span class="n">test</span> <span class="n">function</span> <span class="ow">and</span> <span class="n">method</span> <span class="n">discovery</span>
  <span class="n">xfail_strict</span> <span class="p">(</span><span class="nb">bool</span><span class="p">)</span>      <span class="n">default</span> <span class="k">for</span> <span class="n">the</span> <span class="n">strict</span> <span class="n">parameter</span> <span class="n">of</span> <span class="n">xfail</span> <span class="n">markers</span> <span class="n">when</span> <span class="ow">not</span> <span class="n">given</span> <span class="n">explicitly</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="bp">False</span><span class="p">)</span>
  <span class="n">junit_suite_name</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="n">Test</span> <span class="n">suite</span> <span class="n">name</span> <span class="k">for</span> <span class="n">JUnit</span> <span class="n">report</span>
  <span class="n">junit_logging</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span>   <span class="n">Write</span> <span class="n">captured</span> <span class="n">log</span> <span class="n">messages</span> <span class="n">to</span> <span class="n">JUnit</span> <span class="n">report</span><span class="p">:</span> <span class="n">one</span> <span class="n">of</span> <span class="n">no</span><span class="o">|</span><span class="n">system</span><span class="o">-</span><span class="n">out</span><span class="o">|</span><span class="n">system</span><span class="o">-</span><span class="n">err</span>
  <span class="n">doctest_optionflags</span> <span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="n">option</span> <span class="n">flags</span> <span class="k">for</span> <span class="n">doctests</span>
  <span class="n">doctest_encoding</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="n">encoding</span> <span class="n">used</span> <span class="k">for</span> <span class="n">doctest</span> <span class="n">files</span>
  <span class="n">cache_dir</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span>       <span class="n">cache</span> <span class="n">directory</span> <span class="n">path</span><span class="o">.</span>
  <span class="n">filterwarnings</span> <span class="p">(</span><span class="n">linelist</span><span class="p">)</span> <span class="n">Each</span> <span class="n">line</span> <span class="n">specifies</span> <span class="n">a</span> <span class="n">pattern</span> <span class="k">for</span> <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="o">.</span> <span class="n">Processed</span> <span class="n">after</span> <span class="o">-</span><span class="n">W</span> <span class="ow">and</span> <span class="o">--</span><span class="n">pythonwarnings</span><span class="o">.</span>
  <span class="n">log_print</span> <span class="p">(</span><span class="nb">bool</span><span class="p">)</span>         <span class="n">default</span> <span class="n">value</span> <span class="k">for</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="k">print</span><span class="o">-</span><span class="n">logs</span>
  <span class="n">log_level</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span>       <span class="n">default</span> <span class="n">value</span> <span class="k">for</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">level</span>
  <span class="n">log_format</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span>      <span class="n">default</span> <span class="n">value</span> <span class="k">for</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">format</span>
  <span class="n">log_date_format</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="n">default</span> <span class="n">value</span> <span class="k">for</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">date</span><span class="o">-</span><span class="n">format</span>
  <span class="n">log_cli</span> <span class="p">(</span><span class="nb">bool</span><span class="p">)</span>           <span class="n">enable</span> <span class="n">log</span> <span class="n">display</span> <span class="n">during</span> <span class="n">test</span> <span class="n">run</span> <span class="p">(</span><span class="n">also</span> <span class="n">known</span> <span class="k">as</span> <span class="s2">&quot;live logging&quot;</span><span class="p">)</span><span class="o">.</span>
  <span class="n">log_cli_level</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span>   <span class="n">default</span> <span class="n">value</span> <span class="k">for</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">cli</span><span class="o">-</span><span class="n">level</span>
  <span class="n">log_cli_format</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span>  <span class="n">default</span> <span class="n">value</span> <span class="k">for</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">cli</span><span class="o">-</span><span class="n">format</span>
  <span class="n">log_cli_date_format</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="n">default</span> <span class="n">value</span> <span class="k">for</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">cli</span><span class="o">-</span><span class="n">date</span><span class="o">-</span><span class="n">format</span>
  <span class="n">log_file</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span>        <span class="n">default</span> <span class="n">value</span> <span class="k">for</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="nb">file</span>
  <span class="n">log_file_level</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span>  <span class="n">default</span> <span class="n">value</span> <span class="k">for</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="nb">file</span><span class="o">-</span><span class="n">level</span>
  <span class="n">log_file_format</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="n">default</span> <span class="n">value</span> <span class="k">for</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="nb">file</span><span class="o">-</span><span class="n">format</span>
  <span class="n">log_file_date_format</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="n">default</span> <span class="n">value</span> <span class="k">for</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="nb">file</span><span class="o">-</span><span class="n">date</span><span class="o">-</span><span class="n">format</span>
  <span class="n">addopts</span> <span class="p">(</span><span class="n">args</span><span class="p">)</span>           <span class="n">extra</span> <span class="n">command</span> <span class="n">line</span> <span class="n">options</span>
  <span class="n">minversion</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span>      <span class="n">minimally</span> <span class="n">required</span> <span class="n">pytest</span> <span class="n">version</span>

<span class="n">environment</span> <span class="n">variables</span><span class="p">:</span>
  <span class="n">PYTEST_ADDOPTS</span>           <span class="n">extra</span> <span class="n">command</span> <span class="n">line</span> <span class="n">options</span>
  <span class="n">PYTEST_PLUGINS</span>           <span class="n">comma</span><span class="o">-</span><span class="n">separated</span> <span class="n">plugins</span> <span class="n">to</span> <span class="n">load</span> <span class="n">during</span> <span class="n">startup</span>
  <span class="n">PYTEST_DEBUG</span>             <span class="nb">set</span> <span class="n">to</span> <span class="n">enable</span> <span class="n">debug</span> <span class="n">tracing</span> <span class="n">of</span> <span class="n">pytest</span><span class="s1">&#39;s internals</span>


<span class="n">to</span> <span class="n">see</span> <span class="n">available</span> <span class="n">markers</span> <span class="nb">type</span><span class="p">:</span> <span class="n">pytest</span> <span class="o">--</span><span class="n">markers</span>
<span class="n">to</span> <span class="n">see</span> <span class="n">available</span> <span class="n">fixtures</span> <span class="nb">type</span><span class="p">:</span> <span class="n">pytest</span> <span class="o">--</span><span class="n">fixtures</span>
<span class="p">(</span><span class="n">shown</span> <span class="n">according</span> <span class="n">to</span> <span class="n">specified</span> <span class="n">file_or_dir</span> <span class="ow">or</span> <span class="n">current</span> <span class="nb">dir</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">specified</span><span class="p">;</span> <span class="n">fixtures</span> <span class="k">with</span> <span class="n">leading</span> <span class="s1">&#39;_&#39;</span> <span class="n">are</span> <span class="n">only</span> <span class="n">shown</span> <span class="k">with</span> <span class="n">the</span> <span class="s1">&#39;-v&#39;</span> <span class="n">option</span>
</pre></div>
</td></tr></table>

<h3 id="_1">快速入门</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_passing</span><span class="p">():</span>
    <span class="k">assert</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>执行：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ pytest pass_test.py 
<span class="o">===========================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">===========================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">1</span> item                                                                                          

pass_test.py .                                                                                     <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">========================================</span> <span class="m">1</span> passed in <span class="m">0</span>.01 <span class="nv">seconds</span> <span class="o">=========================================</span>
</pre></div>
</td></tr></table>

<p>pass_test.py后的点表示一个测试运行并通过。 如果你需要更多信息，您可以使用-v或--verbose</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ pytest pass_test.py  -v
<span class="o">===========================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">===========================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">1</span> item                                                                                          

pass_test.py ::test_passing PASSED                                                                        <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">========================================</span> <span class="m">1</span> passed in <span class="m">0</span>.01 <span class="nv">seconds</span> <span class="o">=========================================</span>
</pre></div>
</td></tr></table>

<p>在彩色终端，PASSED和底线是绿色的。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_failing</span><span class="p">():</span>
    <span class="k">assert</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>执行：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ pytest fail_test.py 
<span class="o">===========================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">===========================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">1</span> item                                                                                          

fail_test.py F                                                                                       <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">================================================</span> <span class="nv">FAILURES</span> <span class="o">=================================================</span>
______________________________________________ test_failing _______________________________________________

    def test_failing<span class="o">()</span>:
&gt;       assert <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span> <span class="o">==</span> <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E       assert <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span> <span class="o">==</span> <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E         At index <span class="m">0</span> diff: <span class="m">1</span> !<span class="o">=</span> <span class="m">3</span>
E         Use -v to get the full diff

fail_test.py :2: <span class="nv">AssertionError</span>
<span class="o">========================================</span> <span class="m">1</span> failed in <span class="m">0</span>.03 <span class="nv">seconds</span> <span class="o">=========================================</span>

$ pytest fail_test.py -v
<span class="o">===========================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">===========================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">1</span> item                                                                                          

fail_test.py ::test_failing FAILED                                                                        <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">================================================</span> <span class="nv">FAILURES</span> <span class="o">=================================================</span>
______________________________________________ test_failing _______________________________________________

    def test_failing<span class="o">()</span>:
&gt;       assert <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span> <span class="o">==</span> <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E       assert <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span> <span class="o">==</span> <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E         At index <span class="m">0</span> diff: <span class="m">1</span> !<span class="o">=</span> <span class="m">3</span>
E         Full diff:
E         - <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span>
E         ?  ^     ^
E         + <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E         ?  ^     ^

fail_test.py :2: <span class="nv">AssertionError</span>
<span class="o">========================================</span> <span class="m">1</span> failed in <span class="m">0</span>.02 <span class="nv">seconds</span> <span class="o">=========================================</span>
</pre></div>
</td></tr></table>

<p>如果没有参数，pytest会查看当前目录和所有子目录的测试文件(test_开头或者_test结尾)并运行。 也可以指定文件名，目录名称或这些名称的列表。</p>
<p>我们创建tasks的子目录，增加几个测试</p>
<p>task1_test.py</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>

<span class="n">Task</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Task&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;summary&#39;</span><span class="p">,</span> <span class="s1">&#39;owner&#39;</span><span class="p">,</span> <span class="s1">&#39;done&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">])</span>
<span class="n">Task</span><span class="o">.</span><span class="fm">__new__</span><span class="o">.</span><span class="vm">__defaults__</span> <span class="o">=</span> <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_defaults</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Using no parameters should invoke defaults.&quot;&quot;&quot;</span>
    <span class="n">t1</span> <span class="o">=</span> <span class="n">Task</span><span class="p">()</span>
    <span class="n">t2</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">t1</span> <span class="o">==</span> <span class="n">t2</span>


<span class="k">def</span> <span class="nf">test_member_access</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Check .field functionality of namedtuple.&quot;&quot;&quot;</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span><span class="s1">&#39;buy milk&#39;</span><span class="p">,</span> <span class="s1">&#39;brian&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">summary</span> <span class="o">==</span> <span class="s1">&#39;buy milk&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">owner</span> <span class="o">==</span> <span class="s1">&#39;brian&#39;</span>
    <span class="k">assert</span> <span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">done</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>task2_test.py</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>


<span class="n">Task</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Task&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;summary&#39;</span><span class="p">,</span> <span class="s1">&#39;owner&#39;</span><span class="p">,</span> <span class="s1">&#39;done&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">])</span>
<span class="n">Task</span><span class="o">.</span><span class="fm">__new__</span><span class="o">.</span><span class="vm">__defaults__</span> <span class="o">=</span> <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_asdict</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;_asdict() should return a dictionary.&quot;&quot;&quot;</span>
    <span class="n">t_task</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span><span class="s1">&#39;do something&#39;</span><span class="p">,</span> <span class="s1">&#39;okken&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
    <span class="n">t_dict</span> <span class="o">=</span> <span class="n">t_task</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span>
    <span class="n">expected</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;summary&#39;</span><span class="p">:</span> <span class="s1">&#39;do something&#39;</span><span class="p">,</span>
                <span class="s1">&#39;owner&#39;</span><span class="p">:</span> <span class="s1">&#39;okken&#39;</span><span class="p">,</span>
                <span class="s1">&#39;done&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">21</span><span class="p">}</span>
    <span class="k">assert</span> <span class="n">t_dict</span> <span class="o">==</span> <span class="n">expected</span>


<span class="k">def</span> <span class="nf">test_replace</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;replace() should change passed in fields.&quot;&quot;&quot;</span>
    <span class="n">t_before</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span><span class="s1">&#39;finish book&#39;</span><span class="p">,</span> <span class="s1">&#39;brian&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
    <span class="n">t_after</span> <span class="o">=</span> <span class="n">t_before</span><span class="o">.</span><span class="n">_replace</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">done</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">t_expected</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span><span class="s1">&#39;finish book&#39;</span><span class="p">,</span> <span class="s1">&#39;brian&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">t_after</span> <span class="o">==</span> <span class="n">t_expected</span>
</pre></div>
</td></tr></table>

<p>执行示例：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">andrew</span><span class="nd">@andrew</span><span class="o">-</span><span class="n">PowerEdge</span><span class="o">-</span><span class="n">T630</span><span class="p">:</span><span class="o">~/</span><span class="n">code</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">pytest_testing</span><span class="o">/</span><span class="n">ch1</span><span class="err">$</span> <span class="n">pytest</span>
<span class="o">===========================================</span> <span class="n">test</span> <span class="n">session</span> <span class="n">starts</span> <span class="o">===========================================</span>
<span class="n">platform</span> <span class="n">linux</span> <span class="o">--</span> <span class="n">Python</span> <span class="mf">3.5</span><span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">3.5</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">py</span><span class="o">-</span><span class="mf">1.5</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">0.6</span><span class="o">.</span><span class="mi">0</span>
<span class="n">rootdir</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">andrew</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">pytest_testing</span><span class="o">/</span><span class="n">ch1</span><span class="p">,</span> <span class="n">inifile</span><span class="p">:</span>
<span class="n">collected</span> <span class="mi">6</span> <span class="n">items</span>                                                                                         

<span class="n">fail_test</span><span class="o">.</span><span class="n">py</span> <span class="n">F</span>                                                                                      <span class="p">[</span> <span class="mi">16</span><span class="o">%</span><span class="p">]</span>
<span class="n">pass_test</span><span class="o">.</span><span class="n">py</span> <span class="o">.</span>                                                                                      <span class="p">[</span> <span class="mi">33</span><span class="o">%</span><span class="p">]</span>
<span class="n">tasks</span><span class="o">/</span><span class="n">task1_test</span><span class="o">.</span><span class="n">py</span> <span class="o">..</span>                                                                              <span class="p">[</span> <span class="mi">66</span><span class="o">%</span><span class="p">]</span>
<span class="n">tasks</span><span class="o">/</span><span class="n">task2_test</span><span class="o">.</span><span class="n">py</span> <span class="o">..</span>                                                                              <span class="p">[</span><span class="mi">100</span><span class="o">%</span><span class="p">]</span>

<span class="o">================================================</span> <span class="n">FAILURES</span> <span class="o">=================================================</span>
<span class="n">______________________________________________</span> <span class="n">test_failing</span> <span class="n">_______________________________________________</span>

    <span class="k">def</span> <span class="nf">test_failing</span><span class="p">():</span>
<span class="o">&gt;</span>       <span class="k">assert</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">E</span>       <span class="k">assert</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">E</span>         <span class="n">At</span> <span class="n">index</span> <span class="mi">0</span> <span class="n">diff</span><span class="p">:</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">3</span>
<span class="n">E</span>         <span class="n">Use</span> <span class="o">-</span><span class="n">v</span> <span class="n">to</span> <span class="n">get</span> <span class="n">the</span> <span class="n">full</span> <span class="n">diff</span>

<span class="n">fail_test</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span> <span class="ne">AssertionError</span>
<span class="o">===================================</span> <span class="mi">1</span> <span class="n">failed</span><span class="p">,</span> <span class="mi">5</span> <span class="n">passed</span> <span class="ow">in</span> <span class="mf">0.04</span> <span class="n">seconds</span> <span class="o">====================================</span>
<span class="n">andrew</span><span class="nd">@andrew</span><span class="o">-</span><span class="n">PowerEdge</span><span class="o">-</span><span class="n">T630</span><span class="p">:</span><span class="o">~/</span><span class="n">code</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">pytest_testing</span><span class="o">/</span><span class="n">ch1</span><span class="err">$</span> <span class="n">pytest</span> <span class="n">tasks</span>
<span class="o">===========================================</span> <span class="n">test</span> <span class="n">session</span> <span class="n">starts</span> <span class="o">===========================================</span>
<span class="n">platform</span> <span class="n">linux</span> <span class="o">--</span> <span class="n">Python</span> <span class="mf">3.5</span><span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">3.5</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">py</span><span class="o">-</span><span class="mf">1.5</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">0.6</span><span class="o">.</span><span class="mi">0</span>
<span class="n">rootdir</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">andrew</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">pytest_testing</span><span class="o">/</span><span class="n">ch1</span><span class="p">,</span> <span class="n">inifile</span><span class="p">:</span>
<span class="n">collected</span> <span class="mi">4</span> <span class="n">items</span>                                                                                         

<span class="n">tasks</span><span class="o">/</span><span class="n">task1_test</span><span class="o">.</span><span class="n">py</span> <span class="o">..</span>                                                                              <span class="p">[</span> <span class="mi">50</span><span class="o">%</span><span class="p">]</span>
<span class="n">tasks</span><span class="o">/</span><span class="n">task2_test</span><span class="o">.</span><span class="n">py</span> <span class="o">..</span>                                                                              <span class="p">[</span><span class="mi">100</span><span class="o">%</span><span class="p">]</span>

<span class="o">========================================</span> <span class="mi">4</span> <span class="n">passed</span> <span class="ow">in</span> <span class="mf">0.02</span> <span class="n">seconds</span> <span class="o">=========================================</span>
<span class="n">andrew</span><span class="nd">@andrew</span><span class="o">-</span><span class="n">PowerEdge</span><span class="o">-</span><span class="n">T630</span><span class="p">:</span><span class="o">~/</span><span class="n">code</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">pytest_testing</span><span class="o">/</span><span class="n">ch1</span><span class="err">$</span> <span class="n">pytest</span> <span class="o">-</span><span class="n">v</span> <span class="n">tasks</span><span class="o">/</span><span class="n">task2_test</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_asdict</span>
<span class="o">===========================================</span> <span class="n">test</span> <span class="n">session</span> <span class="n">starts</span> <span class="o">===========================================</span>
<span class="n">platform</span> <span class="n">linux</span> <span class="o">--</span> <span class="n">Python</span> <span class="mf">3.5</span><span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">3.5</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">py</span><span class="o">-</span><span class="mf">1.5</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">0.6</span><span class="o">.</span><span class="mi">0</span> <span class="o">--</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python3</span>
<span class="n">cachedir</span><span class="p">:</span> <span class="o">.</span><span class="n">pytest_cache</span>
<span class="n">rootdir</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">andrew</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">pytest_testing</span><span class="o">/</span><span class="n">ch1</span><span class="p">,</span> <span class="n">inifile</span><span class="p">:</span>
<span class="n">collected</span> <span class="mi">1</span> <span class="n">item</span>                                                                                          

<span class="n">tasks</span><span class="o">/</span><span class="n">task2_test</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_asdict</span> <span class="n">PASSED</span>                                                             <span class="p">[</span><span class="mi">100</span><span class="o">%</span><span class="p">]</span>

<span class="o">========================================</span> <span class="mi">1</span> <span class="n">passed</span> <span class="ow">in</span> <span class="mf">0.01</span> <span class="n">seconds</span> <span class="o">=========================================</span>
<span class="n">andrew</span><span class="nd">@andrew</span><span class="o">-</span><span class="n">PowerEdge</span><span class="o">-</span><span class="n">T630</span><span class="p">:</span><span class="o">~/</span><span class="n">code</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">pytest_testing</span><span class="o">/</span><span class="n">ch1</span><span class="err">$</span> <span class="n">pytest</span> <span class="o">--</span><span class="n">collect</span><span class="o">-</span><span class="n">only</span>
<span class="o">===========================================</span> <span class="n">test</span> <span class="n">session</span> <span class="n">starts</span> <span class="o">===========================================</span>
<span class="n">platform</span> <span class="n">linux</span> <span class="o">--</span> <span class="n">Python</span> <span class="mf">3.5</span><span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">3.5</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">py</span><span class="o">-</span><span class="mf">1.5</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">0.6</span><span class="o">.</span><span class="mi">0</span>
<span class="n">rootdir</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">andrew</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">pytest_testing</span><span class="o">/</span><span class="n">ch1</span><span class="p">,</span> <span class="n">inifile</span><span class="p">:</span>
<span class="n">collected</span> <span class="mi">6</span> <span class="n">items</span>                                                                                         
<span class="o">&lt;</span><span class="n">Module</span> <span class="s1">&#39;fail_test.py&#39;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">Function</span> <span class="s1">&#39;test_failing&#39;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">Module</span> <span class="s1">&#39;pass_test.py&#39;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">Function</span> <span class="s1">&#39;test_passing&#39;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">Module</span> <span class="s1">&#39;tasks/task1_test.py&#39;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">Function</span> <span class="s1">&#39;test_defaults&#39;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">Function</span> <span class="s1">&#39;test_member_access&#39;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">Module</span> <span class="s1">&#39;tasks/task2_test.py&#39;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">Function</span> <span class="s1">&#39;test_asdict&#39;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">Function</span> <span class="s1">&#39;test_replace&#39;</span><span class="o">&gt;</span>

<span class="o">======================================</span> <span class="n">no</span> <span class="n">tests</span> <span class="n">ran</span> <span class="ow">in</span> <span class="mf">0.02</span> <span class="n">seconds</span> <span class="o">=======================================</span>
<span class="n">andrew</span><span class="nd">@andrew</span><span class="o">-</span><span class="n">PowerEdge</span><span class="o">-</span><span class="n">T630</span><span class="p">:</span><span class="o">~/</span><span class="n">code</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">pytest_testing</span><span class="o">/</span><span class="n">ch1</span><span class="err">$</span> <span class="n">pytest</span> <span class="o">--</span><span class="n">collect</span><span class="o">-</span><span class="n">only</span> <span class="o">-</span><span class="n">k</span> <span class="s2">&quot;asdict or defaults&quot;</span>
<span class="o">===========================================</span> <span class="n">test</span> <span class="n">session</span> <span class="n">starts</span> <span class="o">===========================================</span>
<span class="n">platform</span> <span class="n">linux</span> <span class="o">--</span> <span class="n">Python</span> <span class="mf">3.5</span><span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">3.5</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">py</span><span class="o">-</span><span class="mf">1.5</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">0.6</span><span class="o">.</span><span class="mi">0</span>
<span class="n">rootdir</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">andrew</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">pytest_testing</span><span class="o">/</span><span class="n">ch1</span><span class="p">,</span> <span class="n">inifile</span><span class="p">:</span>
<span class="n">collected</span> <span class="mi">6</span> <span class="n">items</span> <span class="o">/</span> <span class="mi">4</span> <span class="n">deselected</span>                                                                          
<span class="o">&lt;</span><span class="n">Module</span> <span class="s1">&#39;tasks/task1_test.py&#39;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">Function</span> <span class="s1">&#39;test_defaults&#39;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">Module</span> <span class="s1">&#39;tasks/task2_test.py&#39;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">Function</span> <span class="s1">&#39;test_asdict&#39;</span><span class="o">&gt;</span>

<span class="o">======================================</span> <span class="mi">4</span> <span class="n">deselected</span> <span class="ow">in</span> <span class="mf">0.02</span> <span class="n">seconds</span> <span class="o">=======================================</span>
<span class="n">andrew</span><span class="nd">@andrew</span><span class="o">-</span><span class="n">PowerEdge</span><span class="o">-</span><span class="n">T630</span><span class="p">:</span><span class="o">~/</span><span class="n">code</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">pytest_testing</span><span class="o">/</span><span class="n">ch1</span><span class="err">$</span> <span class="n">pytest</span> <span class="o">-</span><span class="n">k</span> <span class="s2">&quot;asdict or defaults&quot;</span>
<span class="o">===========================================</span> <span class="n">test</span> <span class="n">session</span> <span class="n">starts</span> <span class="o">===========================================</span>
<span class="n">platform</span> <span class="n">linux</span> <span class="o">--</span> <span class="n">Python</span> <span class="mf">3.5</span><span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">3.5</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">py</span><span class="o">-</span><span class="mf">1.5</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">0.6</span><span class="o">.</span><span class="mi">0</span>
<span class="n">rootdir</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">andrew</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">pytest_testing</span><span class="o">/</span><span class="n">ch1</span><span class="p">,</span> <span class="n">inifile</span><span class="p">:</span>
<span class="n">collected</span> <span class="mi">6</span> <span class="n">items</span> <span class="o">/</span> <span class="mi">4</span> <span class="n">deselected</span>                                                                          

<span class="n">tasks</span><span class="o">/</span><span class="n">task1_test</span><span class="o">.</span><span class="n">py</span> <span class="o">.</span>                                                                               <span class="p">[</span> <span class="mi">50</span><span class="o">%</span><span class="p">]</span>
<span class="n">tasks</span><span class="o">/</span><span class="n">task2_test</span><span class="o">.</span><span class="n">py</span> <span class="o">.</span>                                                                               <span class="p">[</span><span class="mi">100</span><span class="o">%</span><span class="p">]</span>

<span class="o">=================================</span> <span class="mi">2</span> <span class="n">passed</span><span class="p">,</span> <span class="mi">4</span> <span class="n">deselected</span> <span class="ow">in</span> <span class="mf">0.02</span> <span class="n">seconds</span> <span class="o">==================================</span>
<span class="n">andrew</span><span class="nd">@andrew</span><span class="o">-</span><span class="n">PowerEdge</span><span class="o">-</span><span class="n">T630</span><span class="p">:</span><span class="o">~/</span><span class="n">code</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">pytest_testing</span><span class="o">/</span><span class="n">ch1</span><span class="err">$</span> 
</pre></div>
</td></tr></table>

<p>发现规则小结</p>
<ul>
<li>测试文件应该命名为test_<something>.py或<something>_test.py </li>
<li>测试方法和函数应该被命名为test_<something>。</li>
<li>测试类应该被命名为Test<Something></li>
</ul>
<p>结果类型：</p>
<p>以下是测试功能的可能结果：</p>
<ul>
<li>PASSED (.)：测试成功。</li>
<li>FAILED (F):测试失败(或XPASS + strict)。</li>
<li>SKIPPED (s): 测试被跳过。 你可以使用@pytest.mark.skip()或 pytest.mark.skipif()修饰器告诉pytest跳过测试</li>
<li>xfail (x)：预期测试失败。@pytest.mark.xfail()</li>
<li>XPASS (X)：测试不应该通过。</li>
<li>ERROR (E)：错误</li>
</ul>
<h3 id="_2">更多选项</h3>
<ul>
<li>marker 标签</li>
</ul>
<p>比如只执行test_replace()和test_member_access()</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">import</span><span class="err">​</span> <span class="n">pytest</span>
<span class="o">...</span>
<span class="nd">@pytest.mark.run_these_please</span>
<span class="n">def</span><span class="err">​</span> <span class="n">test_member_access</span><span class="p">():</span>
<span class="o">...</span>
</pre></div>
</td></tr></table>

<p>test_replace()也进行同样的修改</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ ​ cd​​ ​ /path/to/code/ch1/tasks
​ pytest​​ ​ -v​​ ​ -m​​ ​ run_these_please
$
<span class="o">==================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">===================</span>
collected <span class="m">4</span> items
task2.py::test_replace PASSED
task1.py::test_member_access <span class="nv">PASSED</span>
<span class="o">===================</span> <span class="m">2</span> tests <span class="nv">deselected</span> <span class="o">===================</span>
<span class="o">=========</span> <span class="m">2</span> passed, <span class="m">2</span> deselected in <span class="m">0</span>.02 <span class="nv">seconds</span> <span class="o">=========</span>
</pre></div>
</td></tr></table>

<p>更多执行方法：　-m "mark1 and mark2"、    -m "mark1 and not mark2"、-m "mark1 or mark2"</p>
<ul>
<li>
<p>-x,  –exitfirst 失败后停止执行</p>
<p>首次失败后停止执行：py.test -x</p>
<p>py.test --maxfail=2 两次失败之后停止执行</p>
</li>
</ul>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ pytest -x
<span class="o">=================================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">=================================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">6</span> items                                                                                                     

fail_test.py <span class="nv">F</span>

<span class="o">======================================================</span> <span class="nv">FAILURES</span> <span class="o">=======================================================</span>
____________________________________________________ test_failing _____________________________________________________

    def test_failing<span class="o">()</span>:
&gt;       assert <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span> <span class="o">==</span> <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E       assert <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span> <span class="o">==</span> <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E         At index <span class="m">0</span> diff: <span class="m">1</span> !<span class="o">=</span> <span class="m">3</span>
E         Use -v to get the full diff

fail_test.py:2: <span class="nv">AssertionError</span>
<span class="o">==============================================</span> <span class="m">1</span> failed in <span class="m">0</span>.04 <span class="nv">seconds</span> <span class="o">===============================================</span>
andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ 

<span class="m">1</span>$ pytest --tb<span class="o">=</span><span class="nv">no</span>
<span class="o">=================================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">=================================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">6</span> items                                                                                                     

fail_test.py F                                                                                                  <span class="o">[</span> <span class="m">16</span>%<span class="o">]</span>
pass_test.py .                                                                                                  <span class="o">[</span> <span class="m">33</span>%<span class="o">]</span>
tasks/task1_test.py ..                                                                                          <span class="o">[</span> <span class="m">66</span>%<span class="o">]</span>
tasks/task2_test.py ..                                                                                          <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">=========================================</span> <span class="m">1</span> failed, <span class="m">5</span> passed in <span class="m">0</span>.05 <span class="nv">seconds</span> <span class="o">==========================================</span>
andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ 

$ pytest --maxfail<span class="o">=</span><span class="m">1</span> --tb<span class="o">=</span><span class="nv">no</span>
<span class="o">=================================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">=================================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">6</span> items                                                                                                     

fail_test.py <span class="nv">F</span>

<span class="o">==============================================</span> <span class="m">1</span> failed in <span class="m">0</span>.04 <span class="nv">seconds</span> <span class="o">===============================================</span>
andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ pytest --maxfail<span class="o">=</span><span class="m">2</span>  --tb<span class="o">=</span><span class="nv">no</span>
<span class="o">=================================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">=================================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">6</span> items                                                                                                     

fail_test.py F                                                                                                  <span class="o">[</span> <span class="m">16</span>%<span class="o">]</span>
pass_test.py .                                                                                                  <span class="o">[</span> <span class="m">33</span>%<span class="o">]</span>
tasks/task1_test.py ..                                                                                          <span class="o">[</span> <span class="m">66</span>%<span class="o">]</span>
tasks/task2_test.py ..                                                                                          <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">=========================================</span> <span class="m">1</span> failed, <span class="m">5</span> passed in <span class="m">0</span>.04 <span class="nv">seconds</span> <span class="o">==========================================</span>
andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ 
</pre></div>
</td></tr></table>

<ul>
<li>设置捕捉</li>
</ul>
<p>默认捕捉方式为file descriptor (FD)级捕捉。捕捉所有到操作系统的1,2输出。</p>
<p>syslevel级捕捉只捕捉python的sys.stdout和sys.stderr。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>py.test -s            <span class="c1"># disable all capturing 实际为--capture=no　这样print就可以在屏幕输出。</span>
py.test --capture<span class="o">=</span>sys <span class="c1"># replace sys.stdout/stderr with in-mem files</span>
py.test --capture<span class="o">=</span>fd  <span class="c1"># also point filedescriptors 1 and 2 to temp file</span>
</pre></div>
</td></tr></table>

<p>* --lf,    --last-failed 执行上次失败的测试</p>
<p>多在--tb 　之后使用</p>
<p>--ff / --failed-first则会先执行失败的，然后执行成功的。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ pytest --lf
<span class="o">=================================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">=================================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">6</span> items / <span class="m">5</span> deselected                                                                                      
run-last-failure: rerun previous <span class="m">1</span> failure

fail_test.py F                                                                                                  <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">======================================================</span> <span class="nv">FAILURES</span> <span class="o">=======================================================</span>
____________________________________________________ test_failing _____________________________________________________

    def test_failing<span class="o">()</span>:
&gt;       assert <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span> <span class="o">==</span> <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E       assert <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span> <span class="o">==</span> <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E         At index <span class="m">0</span> diff: <span class="m">1</span> !<span class="o">=</span> <span class="m">3</span>
E         Use -v to get the full diff

fail_test.py:2: <span class="nv">AssertionError</span>
<span class="o">=======================================</span> <span class="m">1</span> failed, <span class="m">5</span> deselected in <span class="m">0</span>.04 <span class="nv">seconds</span> <span class="o">========================================</span>
$ pytest --ff --tb<span class="o">=</span><span class="nv">no</span>
<span class="o">=================================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">=================================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">6</span> items                                                                                                     
run-last-failure: rerun previous <span class="m">1</span> failure first

fail_test.py F                                                                                                  <span class="o">[</span> <span class="m">16</span>%<span class="o">]</span>
pass_test.py .                                                                                                  <span class="o">[</span> <span class="m">33</span>%<span class="o">]</span>
tasks/task1_test.py ..                                                                                          <span class="o">[</span> <span class="m">66</span>%<span class="o">]</span>
tasks/task2_test.py ..                                                                                          <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">=========================================</span> <span class="m">1</span> failed, <span class="m">5</span> passed in <span class="m">0</span>.04 <span class="nv">seconds</span> <span class="o">==========================================</span>
andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ 
</pre></div>
</td></tr></table>

<ul>
<li>-q 静默模式</li>
</ul>
<p>-q, --quiet decrease verbosity.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ pytest -q
F.....                                                                                                          <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>
<span class="o">======================================================</span> <span class="nv">FAILURES</span> <span class="o">=======================================================</span>
____________________________________________________ test_failing _____________________________________________________

    def test_failing<span class="o">()</span>:
&gt;       assert <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span> <span class="o">==</span> <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E       assert <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span> <span class="o">==</span> <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E         At index <span class="m">0</span> diff: <span class="m">1</span> !<span class="o">=</span> <span class="m">3</span>
E         Full diff:
E         - <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span>
E         ?  ^     ^
E         + <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E         ?  ^     ^

fail_test.py:2: AssertionError
<span class="m">1</span> failed, <span class="m">5</span> passed in <span class="m">0</span>.04 seconds
andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ pytest -qq
F.....                                                                                                          <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>
<span class="o">======================================================</span> <span class="nv">FAILURES</span> <span class="o">=======================================================</span>
____________________________________________________ test_failing _____________________________________________________

    def test_failing<span class="o">()</span>:
&gt;       assert <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span> <span class="o">==</span> <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E       assert <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span> <span class="o">==</span> <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E         At index <span class="m">0</span> diff: <span class="m">1</span> !<span class="o">=</span> <span class="m">3</span>
E         Full diff:
E         - <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span><span class="o">)</span>
E         ?  ^     ^
E         + <span class="o">(</span><span class="m">3</span>, <span class="m">2</span>, <span class="m">1</span><span class="o">)</span>
E         ?  ^     ^

fail_test.py:2: AssertionError
</pre></div>
</td></tr></table>

<ul>
<li>-l 在traceback中显示本地变量</li>
</ul>
<p>--showlocals 在traceback中显示本地变量</p>
<p>修改test_replace()中的t_expected = Task(​ 'finish book'​ , ​ 'brian'​ , True, 10)为t_expected = Task(​ 'finish book'​ , ​ 'brian'​ , True, 11)</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>py.test --showlocals 在traceback中显示本地变量
py.test -l 在traceback中显示本地变量（快捷方式）
</pre></div>
</td></tr></table>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ pytest <span class="nv">tasks</span>
<span class="o">=================================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">=================================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">4</span> items                                                                                                     

tasks/task1_test.py ..                                                                                          <span class="o">[</span> <span class="m">50</span>%<span class="o">]</span>
tasks/task2_test.py .F                                                                                          <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">======================================================</span> <span class="nv">FAILURES</span> <span class="o">=======================================================</span>
____________________________________________________ test_replace _____________________________________________________

    def test_replace<span class="o">()</span>:
        <span class="s2">&quot;&quot;&quot;replace() should change passed in fields.&quot;&quot;&quot;</span>
        <span class="nv">t_before</span> <span class="o">=</span> Task<span class="o">(</span><span class="s1">&#39;finish book&#39;</span>, <span class="s1">&#39;brian&#39;</span>, False<span class="o">)</span>
        <span class="nv">t_after</span> <span class="o">=</span> t_before._replace<span class="o">(</span><span class="nv">id</span><span class="o">=</span><span class="m">10</span>, <span class="k">done</span><span class="o">=</span>True<span class="o">)</span>
        <span class="nv">t_expected</span> <span class="o">=</span> Task<span class="o">(</span><span class="s1">&#39;finish book&#39;</span>, <span class="s1">&#39;brian&#39;</span>, True, <span class="m">11</span><span class="o">)</span>
&gt;       assert <span class="nv">t_after</span> <span class="o">==</span> t_expected
E       AssertionError: assert Task<span class="o">(</span><span class="nv">summary</span><span class="o">=</span>...e<span class="o">=</span>True, <span class="nv">id</span><span class="o">=</span><span class="m">10</span><span class="o">)</span> <span class="o">==</span> Task<span class="o">(</span><span class="nv">summary</span><span class="o">=</span><span class="s1">&#39;...e=True, id=11)</span>
<span class="s1">E         At index 3 diff: 10 != 11</span>
<span class="s1">E         Use -v to get the full diff</span>

<span class="s1">tasks/task2_test.py:26: AssertionError</span>
<span class="s1">========================================= 1 failed, 3 passed in 0.04 seconds ==========================================</span>
<span class="s1">andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ pytest tasks -l</span>
<span class="s1">================================================= test session starts =================================================</span>
<span class="s1">platform linux -- Python 3.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0</span>
<span class="s1">rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:</span>
<span class="s1">collected 4 items                                                                                                     </span>

<span class="s1">tasks/task1_test.py ..                                                                                          [ 50%]</span>
<span class="s1">tasks/task2_test.py .F                                                                                          [100%]</span>

<span class="s1">====================================================== FAILURES =======================================================</span>
<span class="s1">____________________________________________________ test_replace _____________________________________________________</span>

<span class="s1">    def test_replace():</span>
<span class="s1">        &quot;&quot;&quot;replace() should change passed in fields.&quot;&quot;&quot;</span>
<span class="s1">        t_before = Task(&#39;</span>finish book<span class="s1">&#39;, &#39;</span>brian<span class="s1">&#39;, False)</span>
<span class="s1">        t_after = t_before._replace(id=10, done=True)</span>
<span class="s1">        t_expected = Task(&#39;</span>finish book<span class="s1">&#39;, &#39;</span>brian<span class="s1">&#39;, True, 11)</span>
<span class="s1">&gt;       assert t_after == t_expected</span>
<span class="s1">E       AssertionError: assert Task(summary=...e=True, id=10) == Task(summary=&#39;</span>...e<span class="o">=</span>True, <span class="nv">id</span><span class="o">=</span><span class="m">11</span><span class="o">)</span>
E         At index <span class="m">3</span> diff: <span class="m">10</span> !<span class="o">=</span> <span class="m">11</span>
E         Use -v to get the full diff

<span class="nv">t_after</span>    <span class="o">=</span> Task<span class="o">(</span><span class="nv">summary</span><span class="o">=</span><span class="s1">&#39;finish book&#39;</span>, <span class="nv">owner</span><span class="o">=</span><span class="s1">&#39;brian&#39;</span>, <span class="k">done</span><span class="o">=</span>True, <span class="nv">id</span><span class="o">=</span><span class="m">10</span><span class="o">)</span>
<span class="nv">t_before</span>   <span class="o">=</span> Task<span class="o">(</span><span class="nv">summary</span><span class="o">=</span><span class="s1">&#39;finish book&#39;</span>, <span class="nv">owner</span><span class="o">=</span><span class="s1">&#39;brian&#39;</span>, <span class="k">done</span><span class="o">=</span>False, <span class="nv">id</span><span class="o">=</span>None<span class="o">)</span>
<span class="nv">t_expected</span> <span class="o">=</span> Task<span class="o">(</span><span class="nv">summary</span><span class="o">=</span><span class="s1">&#39;finish book&#39;</span>, <span class="nv">owner</span><span class="o">=</span><span class="s1">&#39;brian&#39;</span>, <span class="k">done</span><span class="o">=</span>True, <span class="nv">id</span><span class="o">=</span><span class="m">11</span><span class="o">)</span>

tasks/task2_test.py:26: <span class="nv">AssertionError</span>
<span class="o">=========================================</span> <span class="m">1</span> failed, <span class="m">3</span> passed in <span class="m">0</span>.04 <span class="nv">seconds</span> <span class="o">==========================================</span>
andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ 
</pre></div>
</td></tr></table>

<ul>
<li>–tb=style</li>
</ul>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span>py.test -l 在traceback中显示本地变量（快捷方式）
py.test --tb<span class="o">=</span>auto 默认格式，首尾为long，其他为short
py.test --tb<span class="o">=</span>long 详细的traceback信息格式化形式
py.test --tb<span class="o">=</span>native 标准库格式化形式, 没有额外信息
py.test --tb<span class="o">=</span>short 更短的traceback格式
py.test --tb<span class="o">=</span>line 每个错误一行
py.test --tb<span class="o">=</span>no 无traceback
py.test --full-trace 最详细的格式
</pre></div>
</td></tr></table>

<p>实例：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ pytest tasks --tb <span class="nv">no</span>
<span class="o">=================================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">=================================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">4</span> items                                                                                                     

tasks/task1_test.py ..                                                                                          <span class="o">[</span> <span class="m">50</span>%<span class="o">]</span>
tasks/task2_test.py .F                                                                                          <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">=========================================</span> <span class="m">1</span> failed, <span class="m">3</span> passed in <span class="m">0</span>.04 <span class="nv">seconds</span> <span class="o">==========================================</span>
andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ pytest tasks --tb <span class="nv">line</span>
<span class="o">=================================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">=================================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">4</span> items                                                                                                     

tasks/task1_test.py ..                                                                                          <span class="o">[</span> <span class="m">50</span>%<span class="o">]</span>
tasks/task2_test.py .F                                                                                          <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">======================================================</span> <span class="nv">FAILURES</span> <span class="o">=======================================================</span>
/home/andrew/code/backup/pytest_testing/ch1/tasks/task2_test.py:26: AssertionError: assert Task<span class="o">(</span><span class="nv">summary</span><span class="o">=</span>...e<span class="o">=</span>True, <span class="nv">id</span><span class="o">=</span><span class="m">10</span><span class="o">)</span> <span class="o">==</span> Task<span class="o">(</span><span class="nv">summary</span><span class="o">=</span><span class="s1">&#39;...e=True, id=11)</span>
<span class="s1">========================================= 1 failed, 3 passed in 0.03 seconds ==========================================</span>
<span class="s1">andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ pytest tasks --tb short</span>
<span class="s1">================================================= test session starts =================================================</span>
<span class="s1">platform linux -- Python 3.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0</span>
<span class="s1">rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:</span>
<span class="s1">collected 4 items                                                                                                     </span>

<span class="s1">tasks/task1_test.py ..                                                                                          [ 50%]</span>
<span class="s1">tasks/task2_test.py .F                                                                                          [100%]</span>

<span class="s1">====================================================== FAILURES =======================================================</span>
<span class="s1">____________________________________________________ test_replace _____________________________________________________</span>
<span class="s1">tasks/task2_test.py:26: in test_replace</span>
<span class="s1">    assert t_after == t_expected</span>
<span class="s1">E   AssertionError: assert Task(summary=...e=True, id=10) == Task(summary=&#39;</span>...e<span class="o">=</span>True, <span class="nv">id</span><span class="o">=</span><span class="m">11</span><span class="o">)</span>
E     At index <span class="m">3</span> diff: <span class="m">10</span> !<span class="o">=</span> <span class="m">11</span>
E     Use -v to get the full <span class="nv">diff</span>
<span class="o">=========================================</span> <span class="m">1</span> failed, <span class="m">3</span> passed in <span class="m">0</span>.04 <span class="nv">seconds</span> <span class="o">==========================================</span>
andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ vi tasks/task2_test.py 
andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ pytest tasks  --duration<span class="o">=</span><span class="nv">3</span>
<span class="o">=================================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">=================================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">4</span> items                                                                                                     

tasks/task1_test.py ..                                                                                          <span class="o">[</span> <span class="m">50</span>%<span class="o">]</span>
tasks/task2_test.py ..                                                                                          <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">==============================================</span> slowest <span class="m">3</span> <span class="nb">test</span> <span class="nv">durations</span> <span class="o">===============================================</span>
<span class="m">0</span>.00s setup    tasks/task1_test.py::test_defaults
<span class="m">0</span>.00s setup    tasks/task2_test.py::test_asdict
<span class="m">0</span>.00s setup    tasks/task2_test.py::test_replace
<span class="o">==============================================</span> <span class="m">4</span> passed in <span class="m">0</span>.02 <span class="nv">seconds</span> <span class="o">===============================================</span>
andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$
</pre></div>
</td></tr></table>

<p>* –durations=N</p>
<p>统计最慢执行时间</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span>andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ pytest tasks  --duration<span class="o">=</span><span class="nv">3</span>
<span class="o">=================================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">=================================================</span>
platform linux -- Python <span class="m">3</span>.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: /home/andrew/code/backup/pytest_testing/ch1, inifile:
collected <span class="m">4</span> items                                                                                                     

tasks/task1_test.py ..                                                                                          <span class="o">[</span> <span class="m">50</span>%<span class="o">]</span>
tasks/task2_test.py ..                                                                                          <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">==============================================</span> slowest <span class="m">3</span> <span class="nb">test</span> <span class="nv">durations</span> <span class="o">===============================================</span>
<span class="m">0</span>.00s setup    tasks/task1_test.py::test_defaults
<span class="m">0</span>.00s setup    tasks/task2_test.py::test_asdict
<span class="m">0</span>.00s setup    tasks/task2_test.py::test_replace
<span class="o">==============================================</span> <span class="m">4</span> passed in <span class="m">0</span>.02 <span class="nv">seconds</span> <span class="o">===============================================</span>
andrew@andrew-PowerEdge-T630:~/code/backup/pytest_testing/ch1$ 
</pre></div>
</td></tr></table>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://china-testing.github.io/testing_training.html">自动化性能接口测试线上及深圳培训与项目实战 qq群：144081101 591302926</a></li>
                            <li><a href="http://blog.sciencenet.cn/blog-2604609-1112306.html">pandas数据分析scrapy爬虫 521070358 Py人工智能pandas-opencv 6089740</a></li>
                            <li><a href="http://blog.sciencenet.cn/blog-2604609-1112306.html">中医解梦看相八字算命qq群 391441566 csdn书籍下载-python爬虫 437355848</a></li>
                        </ul>
                </div><!-- /.blogroll -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>