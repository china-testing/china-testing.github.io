<!DOCTYPE html>
<html lang="cn">
<head>
        <meta charset="utf-8" />
        <title>python opencv3实例(对象识别和增强现实)1-图像几何转换</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">python自动化测试人工智能 </a></h1>
                <nav><ul>
                    <li><a href="/category/ce-shi.html">测试</a></li>
                    <li><a href="/category/ce-shi-kuang-jia.html">测试框架</a></li>
                    <li><a href="/category/common.html">common</a></li>
                    <li><a href="/category/ji-qi-xue-xi.html">机器学习</a></li>
                    <li><a href="/category/linux.html">linux</a></li>
                    <li class="active"><a href="/category/python.html">python</a></li>
                    <li><a href="/category/shu-ji.html">书籍</a></li>
                    <li><a href="/category/shu-ju-fen-xi.html">数据分析</a></li>
                    <li><a href="/category/zhong-cao-yao.html">中草药</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/python_opencv3_exmaple1.html" rel="bookmark"
           title="Permalink to python opencv3实例(对象识别和增强现实)1-图像几何转换">python opencv3实例(对象识别和增强现实)1-图像几何转换</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-03-28T19:20:00+08:00">
                Published: 三 28 三月 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/andrew.html">andrew</a>
        </address>
<p>In <a href="/category/python.html">python</a>.</p>

</footer><!-- /.post-info -->      <p><a href="https://github.com/PacktPublishing/OpenCV-3-x-with-Python-By-Example">原书代码地址</a></p>
<p>在本章中，我们将学习如何应用酷的几何效果到图像。 知识点</p>
<ul>
<li>如何安装OpenCV-Python</li>
<li>如何读取，显示和保存图像</li>
<li>如何转换到多个颜色空间</li>
<li>如何应用几何变换，例如平移，旋转，和缩放</li>
<li>如何使用仿射和投影变换来应用几何效果</li>
</ul>
<p>本书英文版本：<a href="https://itbooks.pipipan.com/fs/18113597-310092139">OpenCV 3.x with Python By Example 2nd 2018.pdf</a> </p>
<p>更多opencv相关书籍：<a href="https://china-testing.github.io/opencv_books.html">最佳人工智能图像处理工具OpenCV书籍下载</a></p>
<h2 id="opencv-python">安装OpenCV-Python</h2>
<ul>
<li>安装</li>
</ul>
<p>本教程基于python3，ubuntu 16，在windows环境可能可以运行。</p>
<p>Linux</p>
<div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="n">opencv</span><span class="o">-</span><span class="n">python</span>
</pre></div>


<p>Windows</p>
<div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">opencv</span><span class="o">-</span><span class="n">python</span>
</pre></div>


<ul>
<li>
<p>文档：</p>
<p><a href="http://docs.opencv.org/">官网</a> <a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_tutorials.html">opencv-python官方文档</a></p>
</li>
</ul>
<h2 id="_1">读取显示和保存图片</h2>
<p>01_reading_image.py 读取显示图片</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;./images/input.jpg&#39;</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Input image&#39;</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">()</span>
</pre></div>


<p>02_saving_image.py 保存为灰度图</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>

<span class="n">gray_img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;images/input.jpg&#39;</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">IMREAD_GRAYSCALE</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Grayscale&#39;</span><span class="p">,</span> <span class="n">gray_img</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="s1">&#39;images/output.jpg&#39;</span><span class="p">,</span> <span class="n">gray_img</span><span class="p">)</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">()</span>
</pre></div>


<p><img alt="Alt Text" src="http://upload-images.jianshu.io/upload_images/10819934-331c6955392c9158.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img alt="Alt Text" src="http://upload-images.jianshu.io/upload_images/10819934-3e1fc556d9b1bce1.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h2 id="_2">转换格式</h2>
<p>03_convert_image_format.py</p>
<div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">cv2</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="k">print</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">cv2</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;COLOR_&#39;</span><span class="p">)])</span>
    <span class="p">[</span><span class="s1">&#39;COLOR_BAYER_BG2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_BG2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_BG2BGR_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_BG2BGR_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_BG2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_BG2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_BG2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_BG2RGB_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_BG2RGB_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GB2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GB2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GB2BGR_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GB2BGR_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GB2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GB2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GB2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GB2RGB_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GB2RGB_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GR2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GR2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GR2BGR_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GR2BGR_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GR2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GR2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GR2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GR2RGB_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_GR2RGB_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_RG2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_RG2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_RG2BGR_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_RG2BGR_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_RG2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_RG2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_RG2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_RG2RGB_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BAYER_RG2RGB_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2BGR555&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2BGR565&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2HLS&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2HLS_FULL&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2HSV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2HSV_FULL&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2LAB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2LUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2Lab&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2Luv&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2XYZ&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2YCR_CB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2YCrCb&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2YUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2YUV_I420&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2YUV_IYUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR2YUV_YV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR5552BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR5552BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR5552GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR5552RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR5552RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR5652BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR5652BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR5652GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR5652RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGR5652RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGRA2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGRA2BGR555&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGRA2BGR565&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGRA2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGRA2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGRA2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGRA2YUV_I420&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGRA2YUV_IYUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BGRA2YUV_YV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerBG2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerBG2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerBG2BGR_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerBG2BGR_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerBG2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerBG2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerBG2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerBG2RGB_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerBG2RGB_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGB2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGB2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGB2BGR_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGB2BGR_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGB2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGB2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGB2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGB2RGB_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGB2RGB_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGR2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGR2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGR2BGR_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGR2BGR_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGR2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGR2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGR2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGR2RGB_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerGR2RGB_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerRG2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerRG2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerRG2BGR_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerRG2BGR_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerRG2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerRG2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerRG2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerRG2RGB_EA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_BayerRG2RGB_VNG&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_COLORCVT_MAX&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_GRAY2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_GRAY2BGR555&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_GRAY2BGR565&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_GRAY2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_GRAY2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_GRAY2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_HLS2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_HLS2BGR_FULL&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_HLS2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_HLS2RGB_FULL&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_HSV2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_HSV2BGR_FULL&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_HSV2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_HSV2RGB_FULL&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LAB2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LAB2LBGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LAB2LRGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LAB2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LBGR2LAB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LBGR2LUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LBGR2Lab&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LBGR2Luv&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LRGB2LAB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LRGB2LUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LRGB2Lab&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LRGB2Luv&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LUV2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LUV2LBGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LUV2LRGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_LUV2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_Lab2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_Lab2LBGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_Lab2LRGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_Lab2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_Luv2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_Luv2LBGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_Luv2LRGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_Luv2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_M_RGBA2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2BGR555&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2BGR565&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2HLS&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2HLS_FULL&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2HSV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2HSV_FULL&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2LAB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2LUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2Lab&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2Luv&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2XYZ&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2YCR_CB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2YCrCb&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2YUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2YUV_I420&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2YUV_IYUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGB2YUV_YV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGBA2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGBA2BGR555&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGBA2BGR565&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGBA2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGBA2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGBA2M_RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGBA2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGBA2YUV_I420&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGBA2YUV_IYUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGBA2YUV_YV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_RGBA2mRGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_XYZ2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_XYZ2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YCR_CB2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YCR_CB2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YCrCb2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YCrCb2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGRA_I420&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGRA_IYUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGRA_NV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGRA_NV21&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGRA_UYNV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGRA_UYVY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGRA_Y422&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGRA_YUNV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGRA_YUY2&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGRA_YUYV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGRA_YV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGRA_YVYU&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGR_I420&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGR_IYUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGR_NV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGR_NV21&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGR_UYNV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGR_UYVY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGR_Y422&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGR_YUNV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGR_YUY2&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGR_YUYV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGR_YV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2BGR_YVYU&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2GRAY_420&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2GRAY_I420&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2GRAY_IYUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2GRAY_NV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2GRAY_NV21&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2GRAY_UYNV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2GRAY_UYVY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2GRAY_Y422&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2GRAY_YUNV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2GRAY_YUY2&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2GRAY_YUYV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2GRAY_YV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2GRAY_YVYU&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGBA_I420&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGBA_IYUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGBA_NV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGBA_NV21&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGBA_UYNV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGBA_UYVY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGBA_Y422&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGBA_YUNV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGBA_YUY2&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGBA_YUYV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGBA_YV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGBA_YVYU&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGB_I420&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGB_IYUV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGB_NV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGB_NV21&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGB_UYNV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGB_UYVY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGB_Y422&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGB_YUNV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGB_YUY2&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGB_YUYV&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGB_YV12&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV2RGB_YVYU&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420P2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420P2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420P2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420P2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420P2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420SP2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420SP2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420SP2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420SP2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420SP2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420p2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420p2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420p2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420p2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420p2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420sp2BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420sp2BGRA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420sp2GRAY&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420sp2RGB&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_YUV420sp2RGBA&#39;</span><span class="p">,</span> <span class="s1">&#39;COLOR_mRGBA2RGBA&#39;</span><span class="p">]</span>
</pre></div>


<p>04_image_color_split.py</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;./images/input.jpg&#39;</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>
<span class="n">gray_img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_RGB2GRAY</span><span class="p">)</span>

<span class="n">yuv_img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2YUV</span><span class="p">)</span>
<span class="n">y</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">v</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">yuv_img</span><span class="p">)</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Grayscale image&#39;</span><span class="p">,</span> <span class="n">gray_img</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Y channel&#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;U channel&#39;</span><span class="p">,</span> <span class="n">u</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;V channel&#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">()</span>
</pre></div>


<h2 id="_3">合并图像色带</h2>
<p>05_image_color_merge.py</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;./images/input.jpg&#39;</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>

<span class="n">g</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">r</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
<span class="n">gbr_img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">merge</span><span class="p">((</span><span class="n">g</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">r</span><span class="p">))</span>
<span class="n">rbr_img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">merge</span><span class="p">((</span><span class="n">r</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">r</span><span class="p">))</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Original&#39;</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;GRB&#39;</span><span class="p">,</span> <span class="n">gbr_img</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;RBR&#39;</span><span class="p">,</span> <span class="n">rbr_img</span><span class="p">)</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">()</span>
</pre></div>


<h2 id="translation">移动translation</h2>
<p>06_image_translation.py</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;images/input.jpg&#39;</span><span class="p">)</span>
<span class="n">num_rows</span><span class="p">,</span> <span class="n">num_cols</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

<span class="n">translation_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">70</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">110</span><span class="p">]</span> <span class="p">])</span>
<span class="n">img_translation</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpAffine</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">translation_matrix</span><span class="p">,</span> <span class="p">(</span><span class="n">num_cols</span> <span class="o">+</span> <span class="mi">70</span><span class="p">,</span> <span class="n">num_rows</span> <span class="o">+</span> <span class="mi">110</span><span class="p">))</span>
<span class="n">translation_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">30</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">50</span><span class="p">]</span> <span class="p">])</span>
<span class="n">img_translation</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpAffine</span><span class="p">(</span><span class="n">img_translation</span><span class="p">,</span> <span class="n">translation_matrix</span><span class="p">,</span> <span class="p">(</span><span class="n">num_cols</span> <span class="o">+</span> <span class="mi">70</span> <span class="o">+</span> <span class="mi">30</span><span class="p">,</span> <span class="n">num_rows</span> <span class="o">+</span> <span class="mi">110</span> <span class="o">+</span> <span class="mi">50</span><span class="p">))</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Translation&#39;</span><span class="p">,</span> <span class="n">img_translation</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">()</span>
</pre></div>


<p><img alt="Alt Text" src="http://upload-images.jianshu.io/upload_images/10819934-c0c6f6aab705d5e9.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h2 id="_4">旋转</h2>
<p>07_image_rotation.py</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;images/input.jpg&#39;</span><span class="p">)</span>
<span class="n">num_rows</span><span class="p">,</span> <span class="n">num_cols</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

<span class="n">translation_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">70</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">110</span><span class="p">]</span> <span class="p">])</span>
<span class="n">img_translation</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpAffine</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">translation_matrix</span><span class="p">,</span> <span class="p">(</span><span class="n">num_cols</span> <span class="o">+</span> <span class="mi">70</span><span class="p">,</span> <span class="n">num_rows</span> <span class="o">+</span> <span class="mi">110</span><span class="p">))</span>
<span class="n">translation_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">30</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">50</span><span class="p">]</span> <span class="p">])</span>
<span class="n">img_translation</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpAffine</span><span class="p">(</span><span class="n">img_translation</span><span class="p">,</span> <span class="n">translation_matrix</span><span class="p">,</span> <span class="p">(</span><span class="n">num_cols</span> <span class="o">+</span> <span class="mi">70</span> <span class="o">+</span> <span class="mi">30</span><span class="p">,</span> <span class="n">num_rows</span> <span class="o">+</span> <span class="mi">110</span> <span class="o">+</span> <span class="mi">50</span><span class="p">))</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Translation&#39;</span><span class="p">,</span> <span class="n">img_translation</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">()</span>
</pre></div>


<p><img alt="Alt Text" src="http://upload-images.jianshu.io/upload_images/10819934-6dc060b8b0e5f08c.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h2 id="_5">缩放</h2>
<p>08_image_scaling.py</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;images/input.jpg&#39;</span><span class="p">)</span>

<span class="n">img_scaled</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="n">fx</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">fy</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">INTER_LINEAR</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Scaling - Linear Interpolation&#39;</span><span class="p">,</span> <span class="n">img_scaled</span><span class="p">)</span>

<span class="n">img_scaled</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="n">fx</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">fy</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">INTER_CUBIC</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Scaling - Cubic Interpolation&#39;</span><span class="p">,</span> <span class="n">img_scaled</span><span class="p">)</span>

<span class="n">img_scaled</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,(</span><span class="mi">450</span><span class="p">,</span> <span class="mi">400</span><span class="p">),</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">INTER_AREA</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Scaling - Skewed Size&#39;</span><span class="p">,</span> <span class="n">img_scaled</span><span class="p">)</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">()</span>
</pre></div>


<h2 id="_6">仿射变换</h2>
<p>09_affine_transformation.py</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;images/input.jpg&#39;</span><span class="p">)</span>
<span class="n">rows</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

<span class="n">src_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="n">cols</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">rows</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
<span class="n">dst_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.6</span><span class="o">*</span><span class="p">(</span><span class="n">cols</span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.4</span><span class="o">*</span><span class="p">(</span><span class="n">cols</span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span><span class="n">rows</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>

<span class="n">affine_matrix</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getAffineTransform</span><span class="p">(</span><span class="n">src_points</span><span class="p">,</span> <span class="n">dst_points</span><span class="p">)</span>
<span class="n">img_output</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpAffine</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">affine_matrix</span><span class="p">,</span> <span class="p">(</span><span class="n">cols</span><span class="p">,</span><span class="n">rows</span><span class="p">))</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Input&#39;</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Output&#39;</span><span class="p">,</span> <span class="n">img_output</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">()</span>
</pre></div>


<p><img alt="Alt Text" src="http://upload-images.jianshu.io/upload_images/10819934-28d9c37cbf9d88cc.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h2 id="_7">射影变换</h2>
<p>10_projective_transformation.py</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;images/input.jpg&#39;</span><span class="p">)</span>
<span class="n">rows</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

<span class="n">src_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="n">cols</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">rows</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="n">cols</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">rows</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
<span class="n">dst_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="n">cols</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.33</span><span class="o">*</span><span class="n">cols</span><span class="p">),</span><span class="n">rows</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.66</span><span class="o">*</span><span class="n">cols</span><span class="p">),</span><span class="n">rows</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>

<span class="n">projective_matrix</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getPerspectiveTransform</span><span class="p">(</span><span class="n">src_points</span><span class="p">,</span> <span class="n">dst_points</span><span class="p">)</span>
<span class="n">img_output</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpPerspective</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">projective_matrix</span><span class="p">,</span> <span class="p">(</span><span class="n">cols</span><span class="p">,</span><span class="n">rows</span><span class="p">))</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Input&#39;</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Output&#39;</span><span class="p">,</span> <span class="n">img_output</span><span class="p">)</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">()</span>
</pre></div>


<p><img alt="Alt Text" src="http://upload-images.jianshu.io/upload_images/10819934-66a32a77ea5b428c.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h2 id="_8">图像变形</h2>
<p>11_image_warping.py</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span> 
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;images/input.jpg&#39;</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">IMREAD_GRAYSCALE</span><span class="p">)</span> 
<span class="n">rows</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>

<span class="c1">##################### </span>
<span class="c1"># Vertical wave</span>

<span class="n">img_output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">img</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rows</span><span class="p">):</span> 
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cols</span><span class="p">):</span> 
        <span class="n">offset_x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">25.0</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mf">3.14</span> <span class="o">*</span> <span class="n">i</span> <span class="o">/</span> <span class="mi">180</span><span class="p">))</span> 
        <span class="n">offset_y</span> <span class="o">=</span> <span class="mi">0</span> 
        <span class="k">if</span> <span class="n">j</span><span class="o">+</span><span class="n">offset_x</span> <span class="o">&lt;</span> <span class="n">rows</span><span class="p">:</span> 
            <span class="n">img_output</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">i</span><span class="p">,(</span><span class="n">j</span><span class="o">+</span><span class="n">offset_x</span><span class="p">)</span><span class="o">%</span><span class="n">cols</span><span class="p">]</span> 
        <span class="k">else</span><span class="p">:</span> 
            <span class="n">img_output</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Input&#39;</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span> 
<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Vertical wave&#39;</span><span class="p">,</span> <span class="n">img_output</span><span class="p">)</span>

<span class="c1">##################### </span>
<span class="c1"># Horizontal wave</span>

<span class="n">img_output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">img</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rows</span><span class="p">):</span> 
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cols</span><span class="p">):</span> 
        <span class="n">offset_x</span> <span class="o">=</span> <span class="mi">0</span> 
        <span class="n">offset_y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">16.0</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mf">3.14</span> <span class="o">*</span> <span class="n">j</span> <span class="o">/</span> <span class="mi">150</span><span class="p">))</span> 
        <span class="k">if</span> <span class="n">i</span><span class="o">+</span><span class="n">offset_y</span> <span class="o">&lt;</span> <span class="n">rows</span><span class="p">:</span> 
            <span class="n">img_output</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">img</span><span class="p">[(</span><span class="n">i</span><span class="o">+</span><span class="n">offset_y</span><span class="p">)</span><span class="o">%</span><span class="n">rows</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> 
        <span class="k">else</span><span class="p">:</span> 
            <span class="n">img_output</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Horizontal wave&#39;</span><span class="p">,</span> <span class="n">img_output</span><span class="p">)</span>

<span class="c1">##################### </span>
<span class="c1"># Both horizontal and vertical</span>

<span class="n">img_output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">img</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rows</span><span class="p">):</span> 
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cols</span><span class="p">):</span> 
        <span class="n">offset_x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">20.0</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mf">3.14</span> <span class="o">*</span> <span class="n">i</span> <span class="o">/</span> <span class="mi">150</span><span class="p">))</span> 
        <span class="n">offset_y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">20.0</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mf">3.14</span> <span class="o">*</span> <span class="n">j</span> <span class="o">/</span> <span class="mi">150</span><span class="p">))</span> 
        <span class="k">if</span> <span class="n">i</span><span class="o">+</span><span class="n">offset_y</span> <span class="o">&lt;</span> <span class="n">rows</span> <span class="ow">and</span> <span class="n">j</span><span class="o">+</span><span class="n">offset_x</span> <span class="o">&lt;</span> <span class="n">cols</span><span class="p">:</span> 
            <span class="n">img_output</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">img</span><span class="p">[(</span><span class="n">i</span><span class="o">+</span><span class="n">offset_y</span><span class="p">)</span><span class="o">%</span><span class="n">rows</span><span class="p">,(</span><span class="n">j</span><span class="o">+</span><span class="n">offset_x</span><span class="p">)</span><span class="o">%</span><span class="n">cols</span><span class="p">]</span> 
        <span class="k">else</span><span class="p">:</span> 
            <span class="n">img_output</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Multidirectional wave&#39;</span><span class="p">,</span> <span class="n">img_output</span><span class="p">)</span>

<span class="c1">##################### </span>
<span class="c1"># Concave effect</span>

<span class="n">img_output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">img</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rows</span><span class="p">):</span> 
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cols</span><span class="p">):</span> 
        <span class="n">offset_x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">128.0</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mf">3.14</span> <span class="o">*</span> <span class="n">i</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">cols</span><span class="p">)))</span> 
        <span class="n">offset_y</span> <span class="o">=</span> <span class="mi">0</span> 
        <span class="k">if</span> <span class="n">j</span><span class="o">+</span><span class="n">offset_x</span> <span class="o">&lt;</span> <span class="n">cols</span><span class="p">:</span> 
            <span class="n">img_output</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">i</span><span class="p">,(</span><span class="n">j</span><span class="o">+</span><span class="n">offset_x</span><span class="p">)</span><span class="o">%</span><span class="n">cols</span><span class="p">]</span> 
        <span class="k">else</span><span class="p">:</span> 
            <span class="n">img_output</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Concave&#39;</span><span class="p">,</span> <span class="n">img_output</span><span class="p">)</span>

<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">()</span>
</pre></div>


<p><img alt="Alt Text" src="http://upload-images.jianshu.io/upload_images/10819934-5024f49ec386aacb.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h3 id="_9">参考资料</h3>
<ul>
<li>讨论  qq群144081101 567351477</li>
<li><a href="https://china-testing.github.io/python_opencv3_exmaple1.html">本文最新版本地址</a></li>
<li><a href="https://github.com/china-testing/python-api-tesing">本文涉及的python测试开发库</a> 谢谢点赞！</li>
<li><a href="https://github.com/china-testing/python-api-tesing/blob/master/books.md">本文相关海量书籍下载</a> </li>
<li>道家技术-手相手诊看相中医等钉钉群21734177 qq群：391441566 184175668 338228106 看手相、面相、舌相、抽签、体质识别。服务费50元每人次起。请联系钉钉或者微信pythontesting</li>
<li><a href="https://china-testing.github.io/testing_training.html">接口自动化性能测试线上培训大纲</a></li>
<li><a href="https://china-testing.github.io/opencv_books.html">2018最佳人工智能图像处理工具OpenCV书籍下载</a> </li>
</ul>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://china-testing.github.io/testing_training.html">自动化性能接口测试线上及深圳培训与项目实战 qq群：144081101 591302926</a></li>
                            <li><a href="http://blog.sciencenet.cn/blog-2604609-1112306.html">pandas数据分析scrapy爬虫 521070358 Py人工智能pandas-opencv 6089740</a></li>
                            <li><a href="http://blog.sciencenet.cn/blog-2604609-1112306.html">中医解梦看相八字算命qq群 391441566 csdn书籍下载-python爬虫 437355848</a></li>
                        </ul>
                </div><!-- /.blogroll -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>