<!DOCTYPE html>
<html lang="cn">
<head>
        <meta charset="utf-8" />
        <title>python库介绍-os.path: 平台独立的文件名操作</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">python自动化测试人工智能 </a></h1>
                <nav><ul>
                    <li><a href="/category/ba-zi.html">八字</a></li>
                    <li><a href="/category/ce-shi.html">测试</a></li>
                    <li><a href="/category/ce-shi-kuang-jia.html">测试框架</a></li>
                    <li><a href="/category/common.html">common</a></li>
                    <li><a href="/category/feng-shui.html">风水</a></li>
                    <li><a href="/category/ji-qi-xue-xi.html">机器学习</a></li>
                    <li><a href="/category/jie-meng.html">解梦</a></li>
                    <li><a href="/category/linux.html">linux</a></li>
                    <li class="active"><a href="/category/python.html">python</a></li>
                    <li><a href="/category/shu-ji.html">书籍</a></li>
                    <li><a href="/category/shu-ju-fen-xi.html">数据分析</a></li>
                    <li><a href="/category/zhong-cao-yao.html">中草药</a></li>
                    <li><a href="/category/zhong-yi.html">中医</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/python3_lib_os.path.html" rel="bookmark"
           title="Permalink to python库介绍-os.path: 平台独立的文件名操作">python库介绍-os.path: 平台独立的文件名操作</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-03-25T19:20:00+08:00">
                Published: 日 25 三月 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/andrew.html">andrew</a>
        </address>
<p>In <a href="/category/python.html">python</a>.</p>

</footer><!-- /.post-info -->      <p>的：文件名和路径解析，组合，测试等。</p>
<p>使用os.path模块中包含的函数编写代码以便在多个平台上处理文件非常简单。即使不打算在平台之间移植的程序也应该使用os.path来进行可靠的文件名解析。</p>
<h2 id="_1">解析路径</h2>
<p>路径解析依赖于在os中定义的几个变量：</p>
<div class="highlight"><pre><span></span>os.sep - 路径各部分之间的分隔符（例如“/”或“\”）。

os.extsep - 文件名和文件扩展名之间的分隔符。

os.pardir - 上级目录(e.g., “..”)。

os.curdir - 当前目录 (e.g., “.”)。
</pre></div>


<p>split()函数将路径分成两个独立的部分，并返回包含结果的元组。元组的第二个元素是路径的最后一个元素，第一个元素是之前的所有元素。</p>
<div class="highlight"><pre><span></span><span class="c1"># ospath_split.py</span>

<span class="kn">import</span> <span class="nn">os.path</span>

<span class="n">PATHS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;/one/two/three&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/one/two/three/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;.&#39;</span><span class="p">,</span>
    <span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">PATHS</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{!r:&gt;17} : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">path</span><span class="p">)))</span>
</pre></div>


<p>执行结果</p>
<div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">python3</span> <span class="n">ospath_split</span><span class="o">.</span><span class="n">py</span>

 <span class="s1">&#39;/one/two/three&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;/one/two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">)</span>
<span class="s1">&#39;/one/two/three/&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;/one/two/three&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
              <span class="s1">&#39;/&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
              <span class="s1">&#39;.&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span>
               <span class="s1">&#39;&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>


<p>basename()函数返回等价于split()第二部分的值。</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os.path</span>

<span class="n">PATHS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;/one/two/three&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/one/two/three/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;.&#39;</span><span class="p">,</span>
    <span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">PATHS</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{!r:&gt;17} : {!r}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)))</span>
</pre></div>


<p>执行结果</p>
<div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">python3</span> <span class="n">ospath_basename</span><span class="o">.</span><span class="n">py</span>

 <span class="s1">&#39;/one/two/three&#39;</span> <span class="p">:</span> <span class="s1">&#39;three&#39;</span>
<span class="s1">&#39;/one/two/three/&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;</span>
              <span class="s1">&#39;/&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;</span>
              <span class="s1">&#39;.&#39;</span> <span class="p">:</span> <span class="s1">&#39;.&#39;</span>
               <span class="s1">&#39;&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;</span>
</pre></div>


<p>完整路径被分解到最后一个元素，无论是指文件还是目录。如果路径在目录分隔符（os.sep）中结束，则basename是空的。</p>
<p>dirname() 函数返回分割路径的第一部分：</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os.path</span>

<span class="n">PATHS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;/one/two/three&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/one/two/three/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;.&#39;</span><span class="p">,</span>
    <span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">PATHS</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{!r:&gt;17} : {!r}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">path</span><span class="p">)))</span>
</pre></div>


<p>执行结果</p>
<div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">python3</span> <span class="n">ospath_dirname</span><span class="o">.</span><span class="n">py</span>

 <span class="s1">&#39;/one/two/three&#39;</span> <span class="p">:</span> <span class="s1">&#39;/one/two&#39;</span>
<span class="s1">&#39;/one/two/three/&#39;</span> <span class="p">:</span> <span class="s1">&#39;/one/two/three&#39;</span>
              <span class="s1">&#39;/&#39;</span> <span class="p">:</span> <span class="s1">&#39;/&#39;</span>
              <span class="s1">&#39;.&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;</span>
               <span class="s1">&#39;&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;</span>
</pre></div>


<p>将basename()的结果与dirname()结合起来得到原始路径。</p>
<p>splitext()工作方式类似于split()，但将扩展分隔符（而不是目录分隔符）的路径分开。</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os.path</span>

<span class="n">PATHS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;filename.txt&#39;</span><span class="p">,</span>
    <span class="s1">&#39;filename&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/path/to/filename.txt&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;my-archive.tar.gz&#39;</span><span class="p">,</span>
    <span class="s1">&#39;no-extension.&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">PATHS</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{!r:&gt;21} : {!r}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">path</span><span class="p">)))</span>
</pre></div>


<p>执行结果</p>
<div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">python3</span> <span class="n">ospath_splitext</span><span class="o">.</span><span class="n">py</span>

       <span class="s1">&#39;filename.txt&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">,</span> <span class="s1">&#39;.txt&#39;</span><span class="p">)</span>
           <span class="s1">&#39;filename&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="s1">&#39;/path/to/filename.txt&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;/path/to/filename&#39;</span><span class="p">,</span> <span class="s1">&#39;.txt&#39;</span><span class="p">)</span>
                  <span class="s1">&#39;/&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                   <span class="s1">&#39;&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
  <span class="s1">&#39;my-archive.tar.gz&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;my-archive.tar&#39;</span><span class="p">,</span> <span class="s1">&#39;.gz&#39;</span><span class="p">)</span>
      <span class="s1">&#39;no-extension.&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;no-extension&#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span>
</pre></div>


<p>在查找扩展名时，只使用最后一次出现的os.extsep，所以如果文件名有多个扩展名，则将其分割结果保留在前缀的一部分。</p>
<p>commonprefix() 将路径列表作为参数，并返回表示所有路径中存在的公共前缀的单个字符串。该值可能表示实际上不存在的路径，并且路径分隔符不包含在考虑因素中，所以前缀可能不会停止在分隔符边界上。</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os.path</span>

<span class="n">paths</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;/one/two/three/four&#39;</span><span class="p">,</span>
         <span class="s1">&#39;/one/two/threefold&#39;</span><span class="p">,</span>
         <span class="s1">&#39;/one/two/three/&#39;</span><span class="p">,</span>
         <span class="p">]</span>
<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;PATH:&#39;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>

<span class="k">print</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;PREFIX:&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">commonprefix</span><span class="p">(</span><span class="n">paths</span><span class="p">))</span>
</pre></div>


<p>执行结果</p>
<div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">python3</span> <span class="n">ospath_commonprefix</span><span class="o">.</span><span class="n">py</span>

<span class="n">PATH</span><span class="p">:</span> <span class="o">/</span><span class="n">one</span><span class="o">/</span><span class="n">two</span><span class="o">/</span><span class="n">three</span><span class="o">/</span><span class="n">four</span>
<span class="n">PATH</span><span class="p">:</span> <span class="o">/</span><span class="n">one</span><span class="o">/</span><span class="n">two</span><span class="o">/</span><span class="n">threefold</span>
<span class="n">PATH</span><span class="p">:</span> <span class="o">/</span><span class="n">one</span><span class="o">/</span><span class="n">two</span><span class="o">/</span><span class="n">three</span><span class="o">/</span>

<span class="n">PREFIX</span><span class="p">:</span> <span class="o">/</span><span class="n">one</span><span class="o">/</span><span class="n">two</span><span class="o">/</span><span class="n">three</span>
</pre></div>


<p>commonpath()则会考虑os.seq。</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os.path</span>

<span class="n">paths</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;/one/two/three/four&#39;</span><span class="p">,</span>
         <span class="s1">&#39;/one/two/threefold&#39;</span><span class="p">,</span>
         <span class="s1">&#39;/one/two/three/&#39;</span><span class="p">,</span>
         <span class="p">]</span>
<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;PATH:&#39;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>

<span class="k">print</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;PREFIX:&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">commonpath</span><span class="p">(</span><span class="n">paths</span><span class="p">))</span>
</pre></div>


<p>执行结果</p>
<div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">python3</span> <span class="n">ospath_commonpath</span><span class="o">.</span><span class="n">py</span>

<span class="n">PATH</span><span class="p">:</span> <span class="o">/</span><span class="n">one</span><span class="o">/</span><span class="n">two</span><span class="o">/</span><span class="n">three</span><span class="o">/</span><span class="n">four</span>
<span class="n">PATH</span><span class="p">:</span> <span class="o">/</span><span class="n">one</span><span class="o">/</span><span class="n">two</span><span class="o">/</span><span class="n">threefold</span>
<span class="n">PATH</span><span class="p">:</span> <span class="o">/</span><span class="n">one</span><span class="o">/</span><span class="n">two</span><span class="o">/</span><span class="n">three</span><span class="o">/</span>

<span class="n">PREFIX</span><span class="p">:</span> <span class="o">/</span><span class="n">one</span><span class="o">/</span><span class="n">two</span>
</pre></div>


<p><a href="https://github.com/china-testing/python-api-tesing/tree/master/python3_libraries/os.path">本文代码地址</a></p>
<p><a href="https://china-testing.github.io/python3_lib_os.path.html">本文最新版本地址</a></p>
<p>交流QQ群：python 测试开发 144081101</p>
<h2 id="_2">构建路径</h2>
<p>除了将现有的路径分开之外，通常还需要从其他字符串构建路径。要将多个路径组件合并请使用join()：</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os.path</span>

<span class="n">PATHS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;/one&#39;</span><span class="p">,</span> <span class="s1">&#39;/two&#39;</span><span class="p">,</span> <span class="s1">&#39;/three&#39;</span><span class="p">),</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">parts</span> <span class="ow">in</span> <span class="n">PATHS</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} : {!r}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parts</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">)))</span>
</pre></div>


<p>执行结果</p>
<div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">python3</span> <span class="n">ospath_join</span><span class="o">.</span><span class="n">py</span>

<span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="s1">&#39;one/two/three&#39;</span>
<span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="s1">&#39;/one/two/three&#39;</span>
<span class="p">(</span><span class="s1">&#39;/one&#39;</span><span class="p">,</span> <span class="s1">&#39;/two&#39;</span><span class="p">,</span> <span class="s1">&#39;/three&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="s1">&#39;/three&#39;</span>
</pre></div>


<p>如果任何连接的参数以os.sep开始，则所有先前的参数都将被丢弃，新的参数将成为返回值的开始。</p>
<p>也可以使用包含可自动扩展的“可变”组件的路径。例如，expanduser() 将 ~转换为用户主目录的名称。</p>
<div class="highlight"><pre><span></span><span class="c1"># ospath_expanduser.py</span>

<span class="kn">import</span> <span class="nn">os.path</span>

<span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;andrew&#39;</span><span class="p">,</span> <span class="s1">&#39;nosuchuser&#39;</span><span class="p">]:</span>
    <span class="n">lookup</span> <span class="o">=</span> <span class="s1">&#39;~&#39;</span> <span class="o">+</span> <span class="n">user</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{!r:&gt;15} : {!r}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">lookup</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">lookup</span><span class="p">)))</span>
</pre></div>


<p>执行结果</p>
<div class="highlight"><pre><span></span>            <span class="s1">&#39;~&#39;</span> <span class="p">:</span> <span class="s1">&#39;/home/andrew&#39;</span>
      <span class="s1">&#39;~andrew&#39;</span> <span class="p">:</span> <span class="s1">&#39;/home/andrew&#39;</span>
  <span class="s1">&#39;~nosuchuser&#39;</span> <span class="p">:</span> <span class="s1">&#39;~nosuchuser&#39;</span>
</pre></div>


<p>如果找不到用户的主目录，则字符串将以不变的形式返回，如本示例中的〜nosuchuser一样。</p>
<p>expandvars()更通用，它展开路径中的所有shell环境变量。</p>
<div class="highlight"><pre><span></span><span class="c1"># ospath_expandvars.py</span>

<span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;MYVAR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;VALUE&#39;</span>

<span class="k">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expandvars</span><span class="p">(</span><span class="s1">&#39;/path/to/$MYVAR&#39;</span><span class="p">))</span>
</pre></div>


<p>执行结果</p>
<div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">python3</span> <span class="n">ospath_expandvars</span><span class="o">.</span><span class="n">py</span>

<span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">VALUE</span>
</pre></div>


<h2 id="_3">规范化路径</h2>
<p>使用join()或嵌入变量从不同的字符串汇编的路径可能会以额外的分隔符或相对路径组件结束。使用normpath()来清理它们：</p>
<div class="highlight"><pre><span></span><span class="c1"># ospath_normpath.py</span>

<span class="kn">import</span> <span class="nn">os.path</span>

<span class="n">PATHS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;one//two//three&#39;</span><span class="p">,</span>
    <span class="s1">&#39;one/./two/./three&#39;</span><span class="p">,</span>
    <span class="s1">&#39;one/../alt/two/three&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">PATHS</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{!r:&gt;22} : {!r}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">path</span><span class="p">)))</span>
</pre></div>


<p>执行结果</p>
<div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">python3</span> <span class="n">ospath_normpath</span><span class="o">.</span><span class="n">py</span>

     <span class="s1">&#39;one//two//three&#39;</span> <span class="p">:</span> <span class="s1">&#39;one/two/three&#39;</span>
   <span class="s1">&#39;one/./two/./three&#39;</span> <span class="p">:</span> <span class="s1">&#39;one/two/three&#39;</span>
<span class="s1">&#39;one/../alt/two/three&#39;</span> <span class="p">:</span> <span class="s1">&#39;alt/two/three&#39;</span>
</pre></div>


<p>要将相对路径转换为绝对文件名，请使用abspath()。</p>
<div class="highlight"><pre><span></span><span class="c1"># ospath_abspath.py</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">os.path</span>

<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;/usr&#39;</span><span class="p">)</span>

<span class="n">PATHS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;.&#39;</span><span class="p">,</span>
    <span class="s1">&#39;..&#39;</span><span class="p">,</span>
    <span class="s1">&#39;./one/two/three&#39;</span><span class="p">,</span>
    <span class="s1">&#39;../one/two/three&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">PATHS</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{!r:&gt;21} : {!r}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">path</span><span class="p">)))</span>
</pre></div>


<p>执行结果</p>
<div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">python3</span> <span class="n">ospath_normpath</span><span class="o">.</span><span class="n">py</span>

     <span class="s1">&#39;one//two//three&#39;</span> <span class="p">:</span> <span class="s1">&#39;one/two/three&#39;</span>
   <span class="s1">&#39;one/./two/./three&#39;</span> <span class="p">:</span> <span class="s1">&#39;one/two/three&#39;</span>
<span class="s1">&#39;one/../alt/two/three&#39;</span> <span class="p">:</span> <span class="s1">&#39;alt/two/three&#39;</span>
</pre></div>


<h2 id="_4">文件时间</h2>
<p>除了使用路径之外，os.path还包括用于检索文件属性的函数，类似于os.stat（）返回的函数：</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;File         :&#39;</span><span class="p">,</span> <span class="vm">__file__</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Access time  :&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getatime</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Modified time:&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Change time  :&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getctime</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Size         :&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
</pre></div>


<p>os.path.getatime()返回访问时间，os.path.getmtime()返回修改时间，os.path.getctime()返回创建时间。 os.path.getsize()返回文件中的数据量，用字节表示。</p>
<p>执行结果</p>
<div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">python3</span> <span class="n">ospath_properties</span><span class="o">.</span><span class="n">py</span>

<span class="n">File</span>         <span class="p">:</span> <span class="n">ospath_properties</span><span class="o">.</span><span class="n">py</span>
<span class="n">Access</span> <span class="n">time</span>  <span class="p">:</span> <span class="n">Fri</span> <span class="n">Aug</span> <span class="mi">26</span> <span class="mi">16</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span><span class="mo">05</span> <span class="mi">2016</span>
<span class="n">Modified</span> <span class="n">time</span><span class="p">:</span> <span class="n">Fri</span> <span class="n">Aug</span> <span class="mi">26</span> <span class="mi">15</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">48</span> <span class="mi">2016</span>
<span class="n">Change</span> <span class="n">time</span>  <span class="p">:</span> <span class="n">Fri</span> <span class="n">Aug</span> <span class="mi">26</span> <span class="mi">15</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">49</span> <span class="mi">2016</span>
<span class="n">Size</span>         <span class="p">:</span> <span class="mi">481</span>
</pre></div>


<h2 id="_5">测试文件</h2>
<p>当程序遇到路径名时，通常需要知道路径是指文件，目录还是符号链接，以及是否存在。 os.path包含测试所有这些条件的函数。</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os.path</span>

<span class="n">FILENAMES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="vm">__file__</span><span class="p">,</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span>
    <span class="s1">&#39;/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;./broken_link&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">FILENAMES</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;File        : {!r}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">file</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Absolute    :&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="nb">file</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Is File?    :&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="nb">file</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Is Dir?     :&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="nb">file</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Is Link?    :&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="nb">file</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Mountpoint? :&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">ismount</span><span class="p">(</span><span class="nb">file</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Exists?     :&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="nb">file</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Link Exists?:&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">lexists</span><span class="p">(</span><span class="nb">file</span><span class="p">))</span>
    <span class="k">print</span><span class="p">()</span>
</pre></div>


<p>执行结果</p>
<div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">does</span><span class="o">/</span><span class="ow">not</span><span class="o">/</span><span class="n">exist</span> <span class="n">broken_link</span>
<span class="err">$</span> <span class="n">python3</span> <span class="n">ospath_tests</span><span class="o">.</span><span class="n">py</span>

<span class="n">File</span>        <span class="p">:</span> <span class="s1">&#39;ospath_tests.py&#39;</span>
<span class="n">Absolute</span>    <span class="p">:</span> <span class="bp">False</span>
<span class="n">Is</span> <span class="n">File</span><span class="err">?</span>    <span class="p">:</span> <span class="bp">True</span>
<span class="n">Is</span> <span class="n">Dir</span><span class="err">?</span>     <span class="p">:</span> <span class="bp">False</span>
<span class="n">Is</span> <span class="n">Link</span><span class="err">?</span>    <span class="p">:</span> <span class="bp">False</span>
<span class="n">Mountpoint</span><span class="err">?</span> <span class="p">:</span> <span class="bp">False</span>
<span class="n">Exists</span><span class="err">?</span>     <span class="p">:</span> <span class="bp">True</span>
<span class="n">Link</span> <span class="n">Exists</span><span class="err">?</span><span class="p">:</span> <span class="bp">True</span>

<span class="n">File</span>        <span class="p">:</span> <span class="s1">&#39;&#39;</span>
<span class="n">Absolute</span>    <span class="p">:</span> <span class="bp">False</span>
<span class="n">Is</span> <span class="n">File</span><span class="err">?</span>    <span class="p">:</span> <span class="bp">False</span>
<span class="n">Is</span> <span class="n">Dir</span><span class="err">?</span>     <span class="p">:</span> <span class="bp">False</span>
<span class="n">Is</span> <span class="n">Link</span><span class="err">?</span>    <span class="p">:</span> <span class="bp">False</span>
<span class="n">Mountpoint</span><span class="err">?</span> <span class="p">:</span> <span class="bp">False</span>
<span class="n">Exists</span><span class="err">?</span>     <span class="p">:</span> <span class="bp">False</span>
<span class="n">Link</span> <span class="n">Exists</span><span class="err">?</span><span class="p">:</span> <span class="bp">False</span>

<span class="n">File</span>        <span class="p">:</span> <span class="s1">&#39;/&#39;</span>
<span class="n">Absolute</span>    <span class="p">:</span> <span class="bp">True</span>
<span class="n">Is</span> <span class="n">File</span><span class="err">?</span>    <span class="p">:</span> <span class="bp">False</span>
<span class="n">Is</span> <span class="n">Dir</span><span class="err">?</span>     <span class="p">:</span> <span class="bp">True</span>
<span class="n">Is</span> <span class="n">Link</span><span class="err">?</span>    <span class="p">:</span> <span class="bp">False</span>
<span class="n">Mountpoint</span><span class="err">?</span> <span class="p">:</span> <span class="bp">True</span>
<span class="n">Exists</span><span class="err">?</span>     <span class="p">:</span> <span class="bp">True</span>
<span class="n">Link</span> <span class="n">Exists</span><span class="err">?</span><span class="p">:</span> <span class="bp">True</span>

<span class="n">File</span>        <span class="p">:</span> <span class="s1">&#39;./broken_link&#39;</span>
<span class="n">Absolute</span>    <span class="p">:</span> <span class="bp">False</span>
<span class="n">Is</span> <span class="n">File</span><span class="err">?</span>    <span class="p">:</span> <span class="bp">False</span>
<span class="n">Is</span> <span class="n">Dir</span><span class="err">?</span>     <span class="p">:</span> <span class="bp">False</span>
<span class="n">Is</span> <span class="n">Link</span><span class="err">?</span>    <span class="p">:</span> <span class="bp">True</span>
<span class="n">Mountpoint</span><span class="err">?</span> <span class="p">:</span> <span class="bp">False</span>
<span class="n">Exists</span><span class="err">?</span>     <span class="p">:</span> <span class="bp">False</span>
<span class="n">Link</span> <span class="n">Exists</span><span class="err">?</span><span class="p">:</span> <span class="bp">True</span>
</pre></div>


<h2 id="_6">参考资料</h2>
<ul>
<li>python测试等IT技术支持qq群： 144081101(后期会录制视频存在该群群文件) 591302926 567351477 </li>
<li>道家技术-手相手诊看相中医等钉钉群21734177 qq群：391441566 184175668 338228106 看手相、面相、舌相、抽签、体质识别。服务费50元每人次起。请联系钉钉或者微信pythontesting</li>
<li><a href="https://china-testing.github.io/python3_lib_os.path.html">本文最新版本地址</a></li>
<li><a href="https://github.com/china-testing/python-api-tesing">本文涉及的python测试开发库</a> 谢谢点赞！</li>
<li><a href="https://github.com/china-testing/python-api-tesing/blob/master/books.md">本文相关海量书籍下载</a></li>
<li><a href="https://china-testing.github.io/testing_training.html">接口自动化性能测试线上培训大纲</a></li>
</ul>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://china-testing.github.io/testing_training.html">自动化性能接口测试线上及深圳培训与项目实战 qq群：144081101 591302926</a></li>
                            <li><a href="http://blog.sciencenet.cn/blog-2604609-1112306.html">pandas数据分析scrapy爬虫 521070358 Py人工智能pandas-opencv 6089740</a></li>
                            <li><a href="http://blog.sciencenet.cn/blog-2604609-1112306.html">中医解梦看相八字算命qq群 391441566 csdn书籍下载-python爬虫 437355848</a></li>
                        </ul>
                </div><!-- /.blogroll -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>