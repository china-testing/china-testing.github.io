<!DOCTYPE html>
<html lang="cn">
<head>
        <meta charset="utf-8" />
        <title>软件自动化测试初学者忠告</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">python自动化测试人工智能 </a></h1>
                <nav><ul>
                    <li class="active"><a href="/category/ce-shi.html">测试</a></li>
                    <li><a href="/category/ce-shi-kuang-jia.html">测试框架</a></li>
                    <li><a href="/category/common.html">common</a></li>
                    <li><a href="/category/ji-qi-xue-xi.html">机器学习</a></li>
                    <li><a href="/category/linux.html">linux</a></li>
                    <li><a href="/category/python.html">python</a></li>
                    <li><a href="/category/shu-ju-fen-xi.html">数据分析</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/testing_automation_tips.html" rel="bookmark"
           title="Permalink to 软件自动化测试初学者忠告">软件自动化测试初学者忠告</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-05-08T18:20:00+08:00">
                Published: 二 08 五月 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/andrew.html">andrew</a>
        </address>
<p>In <a href="/category/ce-shi.html">测试</a>.</p>

</footer><!-- /.post-info -->      <h2>题外话</h2>
<h3>测试入门</h3>
<p>很多受过高等教育的大学生经常问要不要去报测试培训班来入门测试。</p>
<p>答案是否。</p>
<p>高等教育的合格毕业生要具备自学能力，如果你不具备自学能力，要好好地反省一下，为什么自己受了高等教育迷恋于各种入门级别的培训？是没有毅力还是不知道学习方法？</p>
<p>没有毅力的话，要自己多看些励志的书，多想想社会的残酷，亲人的失望等来勉励自己，毕竟企业多半也不会喜欢懒散的人的。</p>
<p>不知道学习方法的话，可以去知乎上看看，有些地方是回答得挺好的。简而言之，读《软件评测师教程》(国内软件评测师教材),《Software Testing Foundations 4th》(强烈推荐 国外测试认证ISTQB教材)，《谷歌测试之道》是通常比培训机构更好地入门测试。这些测试入门书籍可以在 qq群144081101 567351477的共享找到。</p>
<p>我身边碰到比较有水平的软件测试，没有一个是什么<em>石、</em>testing、<em>林、</em>鸟、*内等入门测试的。而且这些机构经常打着包就业的名义骗人去培训，培训的老师通常口才很好，善于包装，但是关键的一点，这些老师多数自己都不是合格的测试。培训完之后有些学生重学几次又无法就业，甚至出现学生和培训机构对簿公堂的情况(这种情况通常是培训机构败诉，如果你身边有这样的被骗朋友可以建议他们先交涉不行再找律师保护自己)。</p>
<p>实体培训业尤其成为打着就业的幌子进行行骗的重灾区，导致现在主流企业一看到有某些机构经历的简历直接连面试机会都没有了。</p>
<p>当然不是一棍子打死所有的测试培训，比如斯特沃克的培训，google的gtac等分享是做得相当不错，建议自己先对测试有一定的了解，了解测试培训授课老师的水平之后再选择培训，尽量自学为主，在身边找有经验的实际测试人员稍微带下。</p>
<p>测试的方向整体是功能测试的工作岗位逐渐减小。facebook就没有测试人员，google也没有专职的功能测试，功能测试由开发、产品、用户等分担会降低沟通等成本。未来的测试人员更加需要开发技能。</p>
<p>对于太极，推拿之类的，视频是一个很好的学习方法。但是对于软件自动化测试，最好的学习方法不是听课，也不是看视频，而是在有经验的专业人士指导下进行项目实战、发现问题、解决问题。实战实战再实战！</p>
<p>本人曾在公司项目中曾手把手教刚毕业的毫无编程基础的技校生接口、性能、自动化等测试，结果3个月之后他们都跳槽，薪水从4k涨到10k以上(2015年)。</p>
<h3>自动化测试进阶</h3>
<p>IT主要技术体现为英文，要想提升到比较高的水平，必须要有流利的英文阅读能力。</p>
<p>搜索引擎方面要珍惜生命，远离竞价排名，做个有良知不受骗的人，从不用死不悔改的*度开始，优选google，其他的还有<a href="http://t.cn/R3PpEcF">360搜索</a>， <a href="http://t.cn/R3PE0GQ">必应</a>  <a href="http://t.cn/R3PmV2Q">雅虎</a>, 很多QQ群还有免费fanqiang工具。google的搜索通常能直中目标，stackoverlow的回答通常是首选方案。</p>
<p>选择有水平的业内人士帮助是掌握linux、python和测试基础之后一个迅速提升的方法。</p>
<p><a href="https://china-testing.github.io/testing_training.html">接口自动化性能测试线上培训大纲</a></p>
<h3>自动化测试的层次</h3>
<p><img alt="Alt Text" src="/images/testing_automation_tips1.png"> </p>
<p>从图看出自动化尽量以单元、接口为主，如果你有志在自动化测试深入，还在死磕QTP，selenium等的话，建议看下pytest、pexpect、<a href="https://china-testing.github.io/testing_api_10min.html">API测试</a>、单元测试等。</p>
<h2>脚本</h2>
<h3>1-1 不要在实际项目中使用录制和回放</h3>
<p>大多数自动化工具(特别是商业工具)具有记录和播放功能，这个功能的表面简单，实际是一个众所周知的陷阱。录制和回放在广告视频和演示文稿中看起来非常棒。但录制的脚本不使用变量，循环和条件。自动创建的程序和函数的名称通常不直观，通常所有操作都录在一个函数中(可能很大),执行不稳定，维护成本也高。</p>
<ul>
<li>录制和回放适用点</li>
<li>在学习自动化工具</li>
<li>不重用的工作</li>
<li>很难识别和处理的控件</li>
</ul>
<h3>1-2 不要使用暂停</h3>
<p>暂停，比如python中的：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>定义全局变量可以避免大量代码修改，如下</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">WAIT_TIME</span> <span class="o">=</span> <span class="mi">5</span>
<span class="o">...</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">WAIT_TIME</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>上述等待不利于快速执行，较快出现的控件同样需要常见等待。等待对象或对象属性是更好的选择，比如selenium中的显式等待：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="kn">import</span> <span class="n">By</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support.ui</span> <span class="kn">import</span> <span class="n">WebDriverWait</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support</span> <span class="kn">import</span> <span class="n">expected_conditions</span> <span class="k">as</span> <span class="n">EC</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>
<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://somedomain/url_that_delays_loading&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">element</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span>
        <span class="n">EC</span><span class="o">.</span><span class="n">presence_of_element_located</span><span class="p">((</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s2">&quot;myDynamicElement&quot;</span><span class="p">))</span>
    <span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p>又如selenium中的隐式等待：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>
<span class="n">driver</span><span class="o">.</span><span class="n">implicitly_wait</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># seconds</span>
<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://somedomain/url_that_delays_loading&quot;</span><span class="p">)</span>
<span class="n">myDynamicElement</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s2">&quot;myDynamicElement&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>以WebDriverWait一定的时间间隔检查对象的存在(例如每秒一次)，如果象出现对，则返回true。如果对象在timeout参数指定的时间内没有出现，则返回false。因此，如果控件一秒钟内出现，那么等待时间将会是
1秒。</p>
<p>当然短时间的等待，有时也是必要的，比如降低CPU使用率，短时间等待状态改变等。</p>
<h3>1-3 在循环中超时退出</h3>
<p>以常量的形式定义类似超时。例如定义两种类型的短超时(3秒)和长超时(3分钟)。</p>
<h3>1-4 不要将自动化测试完全等同于开发</h3>
<p>然自动化需要编程技巧，但它通常不是完整的开发项目。自动化常由初级程序员开发，因为工作简单得多，并一般为内部需求。在99％的情况下不需要大多数设计模式。在使用数据库时不会使用事务。测试数据量一般不会很大。</p>
<p>代码要力求简单，快速开发。即使使用了行为驱动开发(BDD:behavior-driven development)或关键字驱动的测试(KDT:keyword-driven testing)等方法也要尽量保证代码简单。</p>
<h3>1-5 不要写复杂的代码</h3>
<p>在使用条件和条件时，尽量遵循“不超过三个嵌套级别”的规则。</p>
<p>代码嵌套超过三层非常难以调试。宁肯代码多重复也不要嵌套超过三层。</p>
<h3>1-6 验证逻辑条件的所有选项</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">A</span> <span class="ow">and</span> <span class="n">B</span> <span class="ow">or</span> <span class="n">C</span><span class="err">：</span>
<span class="c1"># if (A and B) or (C and D)</span>
</pre></div>
</td></tr></table>

<p>定要检查这些代码的每个条件(在这个例子中的A，B，C)和所有可能的True和False。添加括号能增加可读性。</p>
<h3>1-7 使用编程规范</h3>
<p>初学者通常不太关注变量和函数的名称使用任何规则。尽管如此，几乎所有的语言都有所谓的编码标准。比如python的<a href="https://www.python.org/dev/peps/pep-0008/">PEP8</a>, <a href="https://google.github.io/styleguide/">google的编程规范</a>。</p>
<p>在大项目中这些标准成为强制性规则，方便互相理解代码。</p>
<h3>1-8 使用静态代码分析器</h3>
<p>对于流行的编程语言，有特殊的代码分析器。例如Python的pylint，JavaScript语言的jslint等。</p>
<p>特别指出对python这样的动态类型的语言，这个更加重要。</p>
<p>pylint通常有很多误报，但是mypy的检查则比较实用。参考：<a href="https://github.com/china-testing/mobile_data#%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90%E5%92%8Clintcode-analysis">python代码分析和lint</a>。</p>
<h3>1-9 随机</h3>
<p>比如打开菜单有快捷键、下拉菜单、图标等多种方式，尽量写方法随机调用各种方式。以求覆盖各种场景，不过要记得添加日志以便跟踪错误。</p>
<h3>1-10 不要使用坐标</h3>
<p>非标准控件尽量不要使用坐标，可以用图像识别的方法：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">Window</span><span class="o">.</span><span class="n">Toolbar</span><span class="o">.</span><span class="n">Click</span><span class="p">(</span><span class="mi">135</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>替换为：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">toolbar_click_button_by_image</span><span class="p">(</span><span class="n">Window</span><span class="o">.</span><span class="n">Toolbar</span><span class="p">,</span> <span class="s2">&quot;Button Caption&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h3>1-11 学习和使用库</h3>
<p>比如：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">full_name</span> <span class="o">=</span> <span class="s1">&#39;{0}</span><span class="se">\\</span><span class="s1">{1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>在linux上就比较尴尬，可以替换为：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">full_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>附： <a href="https://github.com/china-testing/mobile_data">python自动化测试开发库</a></p>
<h3>1-12 避免复制和粘贴</h3>
<p>复制的代码维护成本很高，尽量提取为公共库。</p>
<p><a href="https://github.com/china-testing/mobile_data/blob/master/servers.py">公共测试库示例</a></p>
<h3>1-13 异常捕捉到具体的类</h3>
<p>异常通常是程序考虑不周到才会发生：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the first number: &#39;</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the second number: &#39;</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</td></tr></table>

<p>上述捕捉所有异常并忽略异常的代码通常只在临时代码中使用。通常也要把异常异常信息显示出来。比如</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the first number: &#39;</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the second number: &#39;</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">e</span>
    <span class="k">for</span>  <span class="n">item</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">():</span>
        <span class="k">print</span> <span class="n">item</span>
</pre></div>
</td></tr></table>

<p>又如：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">traceback</span>

<span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">raw2jpg</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">640</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint16</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span> <span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">img</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span> <span class="o">*</span> <span class="p">(</span><span class="mi">255</span> <span class="o">/</span> <span class="n">img</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
        <span class="c1">#img.astype(np.uint8)</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">filename</span><span class="o">+</span><span class="s1">&#39;.jpg&#39;</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">info</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Error: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="k">return</span> <span class="bp">True</span> 
</pre></div>
</td></tr></table>

<p>更佳的方式是捕捉到具体异常：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the first number: &#39;</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the second number: &#39;</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
<span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="k">as</span> <span class="n">e1</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;ZeroDivisionError&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e2</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;TypeError&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>另外一种异常处理方式：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">far</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">no_number</span> <span class="k">else</span> <span class="n">far_number</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">no_number</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h3>1-14 代码与数据分离</h3>
<p>对于小数据集可以使用数组或列表。大数据可以使用数据驱动测试(DDT：data-driven testing)。数据源可能为数据库，Excel或CSV文件等。</p>
<p>注意点：</p>
<ul>
<li>以读模式打开数据文件。</li>
<li>每列只存储一种类型的数据。在数据库的情况下，</li>
<li>用完关闭与数据源</li>
<li>数据文件中不要用空行</li>
</ul>
<p><a href="https://github.com/china-testing/mobile_data/blob/master/servers.py">公共测试库示例</a></p>
<h3>1-15 调试</h3>
<p>简单的可以多使用print或者logging打印一些信息。更高级的内容有</p>
<p>•断点
•单步执行
•查看本地和全局变量的值
•观察变量和表达式</p>
<h3>1-16 不要为未来编写代码</h3>
<p>项目的变化是很频繁，可以做一些自动化测试的技术预研，但一般不要书写有些只供未来使用的代码。</p>
<h3>1-17 让代码更好</h3>
<p>在不影响性能的情况下提高可读性。</p>
<h3>1-18 测试选择适当的语言</h3>
<p>•很重要：语言上手的难易程序和流行度及库支持。一般而言python因为其容易上手、是胶水语言(与其他语言调用方便)、语法简洁、维护成本低、方便调试，是目前自动化测试占有率最高的首选语言。但是c#在windows平台、java、c++等也有一定的市场。虽然python的占有率最高，但是一定要考虑到有些自动化测试开发可能已经有c++，go，java之类的现成的工具。
•尽量不要产生新的编程语言。
•咨询开发
•可以和开发采用同一种语言，尤其是单元测试，一般为采用和开发一样的语言。
• 简化API测试等其他原因</p>
<p>值得注意的是TCL(Tool Command Language)早起因为expect的命令自动化拥有一定的名声，且testcenter、smartbits等仪表一度不支持python等主流语言。但是TCL的语法晦涩，功能弱小，是能不用就不要去用的语言。</p>
<p>参考资料： <a href="http://pypl.github.io/PYPL.html">编程流行度</a>  <a href="www.tiobe.com/tiobe-index/">tiobe</a></p>
<h3>1-19 使用变量前要初始化</h3>
<p>这个在python中可以用mypy检查。</p>
<h2>测试最佳实践</h2>
<h3>2-1 不要实现被测应用的功能</h3>
<p>因为：</p>
<p>•计算和逻辑可能很复杂，且开发已经实现了
•计算和逻辑可能会更改
•使用浮点数的精度可能和语言有关。</p>
<p>白盒和灰盒测试中一般是知道输入和预期结果就好，不要知道具体内部实现得的过程。</p>
<p>例外：大数据、搜索引擎中间算法等不明确预期结果的测试，经常用python快速实现一遍，与开发用c++等语言实现得结果进行比对。</p>
<h3>2-2 测试的独立性</h3>
<h3>2-3 哪些不应该自动化</h3>
<p>主要是基于成本考虑</p>
<p>•难以维护的自动化。
•尽量多做单元测试和接口测试的自动化，少做UI层的自动化
•重复使用次数不多的自动化</p>
<p>有些手工不能做的必要测试，即便自动化的成本很高，也是需要自动化。</p>
<h3>2-4 向开发人员寻求帮助</h3>
<p>开发在具体的开发方面可以值得学习，但是在自动化测试很方案方面自己定夺比较好。比如结果验证，开发大多喜欢直接从数据库中读数据，但是实际上展示数据库数据的应用也是可能出问题的。</p>
<h3>2-5 云测试</h3>
<p>云测试</p>
<p>•要测试桌面应用程序，必须打开会话，操作系统是否支持
•硬件相关的测试云测试支持并不方便。
•移动设备的云服务通常比较贵
•Web应用程序的自动化比较适合在云中执行。
•手机兼容性的测试可以考虑云，功能自动化测试则不用云比较好。</p>
<h3>2-6 充分利用边界值和等价类</h3>
<h3>2-7 错误与警告</h3>
<p>注意区分自动化测试平台或工具的错误和被测应用的bug。</p>
<h3>2-8 使用合适的技术</h3>
<p>在测试自动化中使用了许多特定的方法：ODT，DDT，KDT，BDD，页面对象，基于模型的测试等等。比如那么对KDT一般需要一部分写测试平台，一部分写测试库，一部分写测试用例。</p>
<h3>2-9 特殊错误的验证</h3>
<p>可以书写一个临时的测试来处理某些特定的bug。</p>
<h3>2-10 在写真实测试之前做POC</h3>
<h2>环境</h2>
<p>软件测试自动化中有两种主要的环境类型。一个创建和调试测试，另一个用于运行测试。</p>
<h3>3-1 为您的需要选择一套适当的工具</h3>
<p>以接口自动化测试为例，一些团队，执着的认为java是最好的语言，要用java去发HTTP请求，更有甚者，用jmeter去做接口自动化测试。不排除个别场景，这可能是合适的方式，但是通常的HTTP接口测试，用requests，代码行数通常比java少一个数量级，还不用编译。</p>
<p>python是主流语言中的胶水语言，和其他语言配合都比较完美，通常情况下是自动化测试的首选语言，但是python未必适用所有地方，还需要其他工具和语言进行补充，不过不要太多，学习很多语言也是一件痛苦的事情。</p>
<p>现在还有很多培训机构在鼓吹UI自动化就是自动化测试的全部，一说自动化就是QTP，一问Selenium，Testcomplete之类的都不知为何物，更不用说什么junit，pytest之类的了。</p>
<h3>3-2 慎用自动提交bug</h3>
<p>配置错误，测试代码错误经常导致测试失败。</p>
<p>测试代码有时难以描述清楚测试步骤</p>
<p>注意不要提交重复的bug。</p>
<p>在没有十足的把握的情况下可以用半自动的方式，发送邮件给测试人员，然后又测试人员提交bug。</p>
<h3>3-3 不要使用欺骗的结果</h3>
<p>避免注释测试代码的问题部分或改变预期的结果，以便测试不会出现失败。</p>
<p>如果实在用禁用，要知道禁用用例的比例，后面定期检查修改。</p>
<h3>3-4 熟练使用工具</h3>
<p>比如wingide中Ctrl + \为注释代码的快捷键</p>
<h3>3-5 使用版本控制系统</h3>
<p>避免文件丢失，方便协作，尽快使用hg、git之类的。</p>
<h3>3-6 避免自定义表单</h3>
<p>本来自动化就是为了把页面的东西尽可能走后台，你为了取悦领导(附：大陆目前多数测试领导是不太合格的)还是什么原因，搞成形式主义了。</p>
<p>参数可以用配置文件等方式。</p>
<h3>3-7 自动化所有能自动化的东东</h3>
<p>比如：测试，代码，测试环境，虚拟机，SQL查询，测试数据，报告等等</p>
<h2>运行，日志记录，验证</h2>
<h3>4-1 尽可能经常运行脚本</h3>
<h3>4-2 测试失败时重新执行</h3>
<p>当出现错误时应用程序运行很长一段时间，或特定情况下要尽量定位问题。</p>
<p>一般而言失败的测试先记录下来，所有测试执行完之后在重新执行一次。</p>
<h3>4-3 丰富的日志内容</h3>
<p>错误日志尽量包含：预期值，实际值，地点和操作。</p>
<p>参数尽量用引号等括起来，以免把包含空格的参数当成多个参数。</p>
<h3>4-4 截图</h3>
<p>UI测试必要的时候可以截图，同时处理好滚动。</p>
<h3>4-5 尽量避免比较图像</h3>
<h2>审查</h2>
<p>审查是保持码清晰易懂的好方法，要做代码的互相评审。</p>
<h3>5-1 让非自动化者也可以看懂代码</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_login</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="n">open_page</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">login_as</span><span class="p">(</span><span class="n">login</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
    <span class="n">verify_page_opened</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h3>5-2 避免不必要的优化</h3>
<p>在开始执行任何优化之前如需要慎重考虑。</p>
<p>通常不需要的优化工作看起来像这样：</p>
<p>1.应用程序启动3秒钟，然后进行5秒钟的测试脚本填充搜索字段，还有5秒钟搜索过程，之后脚本用1秒钟读取找到的数据并进行验证。
2.测试人员开始优化读取和验证
3.测试人员花费一天时间进行优化并达到目标：阅读和阅读每次运行时间为半秒</p>
<p>事实上，测试工程师的代码生产力已经翻了一番，但是结果是他整体方案取得了约5％的收益。花一天时间是不值得的。一般需要综合考虑，涉及脚本、被测应用、环境、执行频率等。</p>
<p>建议你在两种情况下优化测试：</p>
<p>•如果测试运行时间过长，并且测试的应用程序是在测试执行期间空闲。
•如果您在代码中看到明显的问题，请更正其中的问题。</p>
<p><a href="https://china-testing.github.io/python_pandas_example1.html">pandas大数据分析性能优化实例-read_csv引擎和分组等</a>,这里是一个必要的优化实例。</p>
<h3>5-3 定期审查别人的代码</h3>
<p>定期审查别人的新代码。可以结对编程，甚至是同时一个人写，一个人看。</p>
<h3>5-4 参与论坛和讨论</h3>
<p>如果您是自动化领域的初学者，并且在自动化团队中工作，那么会从你的同事那里学到很多东西。如果你是唯一的自动化工程师在公司或你的部门没有人能帮助你？</p>
<p>知乎，特别是stackoverflow等社区常常可以找到自己问题满意的答案。同时试图帮助别人也可以扩展自己的眼见。</p>
<h3>5-5 执行重构</h3>
<p>重构是对现有代码的简化，功能和应用程序不会改变。尽管测试自动化中的代码通常很多实际应用更简单，有时候你仍然需要重构。</p>
<p>•您可能会发现您所支持的代码太复杂。
•可能有编写新测试的请求，需要修改代码
•可能需要重构来改进已编写的代码</p>
<p>重构后可以执行所有测试来验证，也可以在公共库等地方添加必要的单元测试。</p>
<h3>5-6 删除低收益的测试</h3>
<p>•测试执行了多少次;
•测试发现了多少实际问题;
•测试需要多久进行一次维护。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://blog.sciencenet.cn/blog-2604609-1112306.html">自动化性能接口测试线上及深圳培训与项目实战 qq群：144081101 591302926</a></li>
                            <li><a href="http://blog.sciencenet.cn/blog-2604609-1112306.html">pandas数据分析scrapy爬虫 521070358 Py人工智能pandas-opencv 6089740</a></li>
                            <li><a href="http://blog.sciencenet.cn/blog-2604609-1112306.html">中医解梦看相八字算命qq群 391441566 csdn书籍下载-python爬虫 437355848</a></li>
                        </ul>
                </div><!-- /.blogroll -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>